var he=Object.defineProperty,ye=Object.defineProperties;var fe=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var A=(e,o,t)=>o in e?he(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,$=(e,o)=>{for(var t in o||(o={}))be.call(o,t)&&A(e,t,o[t]);if(P)for(var t of P(o))ke.call(o,t)&&A(e,t,o[t]);return e},D=(e,o)=>ye(e,fe(o));import{Q as ge}from"./QSkeleton.657ae1f3.js";import{u as M,Q as F}from"./use-quasar.6c925fdd.js";import{Q as Y}from"./QSelect.9fdfa148.js";import{_ as C,au as E,aG as we,d as B,k as Fe,p as y,w as xe,o as x,a1 as N,a2 as L,u as s,c as J,F as Qe,a6 as Ve,a as l,a0 as Q,v as S,s as U,a4 as H}from"./vendor.c8940223.js";import{Q as I}from"./QForm.0fcc3426.js";import{d as Z,e as K}from"./axiosClient.fba0db00.js";import{Q as _}from"./queryKeys.f0c0fd01.js";import{V as je}from"./index.93a91d69.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import"./QMenu.2e2a6c56.js";import"./QDialog.dde3e87a.js";var T;(function(e){e[e["One star"]=1]="One star",e[e["Two star"]=2]="Two star",e[e["Three star"]=3]="Three star",e[e["Four star"]=4]="Four star",e[e["Five star"]=5]="Five star"})(T||(T={}));var O;(function(e){e[e.Hotel=1]="Hotel",e[e.Hostel=2]="Hostel",e[e["Hotel Chains"]=3]="Hotel Chains",e[e["Motel/BnB"]=4]="Motel/BnB",e[e.Apartment=5]="Apartment",e[e["Serviced Apartment"]=6]="Serviced Apartment",e[e.Guesthouse=7]="Guesthouse",e[e.Others=8]="Others"})(O||(O={}));var ee;(function(e){e[e.VND=1]="VND",e[e.USD=2]="USD",e[e.Euro=3]="Euro"})(ee||(ee={}));var oe;(function(e){e[e["Checked In"]=1]="Checked In",e[e["Checked Out"]=2]="Checked Out"})(oe||(oe={}));var ae;(function(e){e[e.Active=1]="Active",e[e.Inactive=2]="Inactive"})(ae||(ae={}));var te;(function(e){e[e.Created=1]="Created",e[e["No Show"]=2]="No Show",e[e.Canceled=3]="Canceled",e[e["Checked In"]=4]="Checked In",e[e["Checked Out"]=5]="Checked Out",e[e["Undo Checked Out"]=6]="Undo Checked Out",e[e.Overstay=7]="Overstay"})(te||(te={}));var se;(function(e){e[e.Created=1]="Created",e[e.Update=2]="Update",e[e["No Show"]=3]="No Show",e[e.Canceled=4]="Canceled",e[e["Checked In"]=5]="Checked In",e[e["Checked Out"]=6]="Checked Out",e[e["Add Product"]=7]="Add Product",e[e["Add Discount"]=8]="Add Discount",e[e["Add Extra"]=9]="Add Extra",e[e["Add Payment"]=10]="Add Payment",e[e["Remove Product"]=11]="Remove Product",e[e["Remove Discount"]=12]="Remove Discount",e[e["Remove Extra"]=13]="Remove Extra",e[e["Remove Payment"]=14]="Remove Payment",e[e["Undo Checked Out"]=15]="Undo Checked Out"})(se||(se={}));var ne;(function(e){e[e.Cash=1]="Cash",e[e.Card=2]="Card",e[e.Transfer=3]="Transfer",e[e["OTA Prepaid"]=4]="OTA Prepaid",e[e.Momo=5]="Momo",e[e["Zalo Pay"]=6]="Zalo Pay"})(ne||(ne={}));var ie;(function(e){e[e["Hotel Discount"]=1]="Hotel Discount",e[e["OTA Discount"]=2]="OTA Discount"})(ie||(ie={}));var re;(function(e){e[e.Hourly=1]="Hourly",e[e.Daily=2]="Daily",e[e.Overnight=3]="Overnight"})(re||(re={}));var R;(function(e){e[e.Male=1]="Male",e[e.Female=2]="Female",e[e.Others=3]="Others"})(R||(R={}));var le;(function(e){e[e.Pending=1]="Pending",e[e.Registered=2]="Registered",e[e.Rejected=3]="Rejected"})(le||(le={}));var ce;(function(e){e[e["Internet Search"]=1]="Internet Search",e[e["Word of Mouth"]=2]="Word of Mouth",e[e.Advertisement=3]="Advertisement",e[e["Sales Man"]=4]="Sales Man",e[e.Others=5]="Others"})(ce||(ce={}));var ue;(function(e){e[e.Available=1]="Available",e[e["In use"]=2]="In use",e[e.Maintenance=3]="Maintenance",e[e.Dirty=4]="Dirty",e[e.Lock=5]="Lock"})(ue||(ue={}));var de;(function(e){e[e["Social ID"]=1]="Social ID",e[e.Passport=2]="Passport",e[e["Driver license"]=3]="Driver license"})(de||(de={}));var pe;(function(e){e[e.Active=1]="Active",e[e.Banned=2]="Banned",e[e.Warning=3]="Warning"})(pe||(pe={}));var me;(function(e){e[e.Created=1]="Created",e[e.Updated=2]="Updated",e[e.Reserved=3]="Reserved",e[e["Checked In"]=4]="Checked In",e[e["Checked Out"]=5]="Checked Out",e[e.Canceled=6]="Canceled",e[e["No Show"]=7]="No Show"})(me||(me={}));var ve;(function(e){e[e.settings=1]="settings",e[e.room=2]="room",e[e.inventory=3]="inventory",e[e.guest=4]="guest",e[e.booking=5]="booking",e[e.make_a_reservation=6]="make_a_reservation",e[e.update_room_fee=7]="update_room_fee",e[e.update_booking_source=8]="update_booking_source",e[e.update_add_guest=9]="update_add_guest",e[e.update_remove_guest=10]="update_remove_guest",e[e.update_add_discount=11]="update_add_discount",e[e.update_remove_discount=12]="update_remove_discount",e[e.check_in=13]="check_in",e[e.check_out=14]="check_out",e[e.cancel_booking=15]="cancel_booking",e[e.no_show_booking=16]="no_show_booking",e[e.undo_check_out=17]="undo_check_out",e[e.home=18]="home"})(ve||(ve={}));const qe=async()=>{const{data:e}=await Z.get("/common/constants/get"),o={accommodationStarOptions:[],accommodationTypeOptions:[],accommodationCurrencieOptions:[],accommodationPolicyTypeOptions:[],bookingMethodStatusOptions:[],bookingStatusOptions:[],bookingHistoryTypeOptions:[],bookingPaymentMethodOptions:[],bookingDiscountTypeOptions:[],stayTypeOptions:[],genderOptions:[],applicantStatusOptions:[],howToKnowOptions:[],roomStatusOptions:[],documentTypeOptions:[],guestStatusOptions:[],guestHistoryTypeOptions:[],permissionOptions:[]};return e.forEach(t=>{switch(t.module_name){case"accommodation":t.constants.forEach(a=>{switch(a.name){case"AccommStar":o.accommodationStarOptions=[...a.choices];break;case"AccommType":o.accommodationTypeOptions=[...a.choices];break;case"AccommCurrency":o.accommodationCurrencieOptions=[...a.choices];break;case"AccommPolicyType":o.accommodationPolicyTypeOptions=[...a.choices];break;case"BookingMethodStatus":o.bookingMethodStatusOptions=[...a.choices];break}});break;case"booking":t.constants.forEach(a=>{switch(a.name){case"PaymentMethod":o.bookingPaymentMethodOptions=[...a.choices];break;case"DiscountType":o.bookingDiscountTypeOptions=[...a.choices];break;case"HistoryType":o.bookingHistoryTypeOptions=[...a.choices];break;case"Status":o.bookingStatusOptions=[...a.choices];break}});break;case"general":t.constants.forEach(a=>{switch(a.name){case"StayType":o.stayTypeOptions=[...a.choices];break;case"Gender":o.genderOptions=[...a.choices];break}});break;case"guest":t.constants.forEach(a=>{switch(a.name){case"HistoryType":o.guestHistoryTypeOptions=[...a.choices];break;case"DocType":o.documentTypeOptions=[...a.choices];break;case"Status":o.guestStatusOptions=[...a.choices];break}});break;case"permissions":t.constants.forEach(a=>{switch(a.name){case"Module":o.permissionOptions=[...a.choices];break}});break;case"pms_admin":t.constants.forEach(a=>{switch(a.name){case"ApplicantStatus":o.applicantStatusOptions=[...a.choices];break;case"HowToKnow":o.howToKnowOptions=[...a.choices];break}});break;case"room":t.constants.forEach(a=>{switch(a.name){case"RoomStatus":o.roomStatusOptions=[...a.choices];break}});break}}),o},$e=()=>{const e=C(_.CONSTANTS,qe),o=t=>{var a,d,p;return(p=(d=(a=e.data.value)==null?void 0:a.accommodationCurrencieOptions.find(k=>k.value===t))==null?void 0:d.name)!=null?p:"USD"};return D($({},e),{getAccCurrencyName:o})},Le=async()=>{const{data:e}=await Z.get("/accounts/me/get");return e},Ze=()=>C(_.ME,Le),Xe=async()=>{const{data:e}=await Z.get("/accounts/profiles/list-for-selection");return e},ze=()=>C([_.PROFILES,"selection"],Xe),Je=async e=>{const{data:o}=await Z.put("/accounts/me/update-details",e);return o},_e=()=>{const e=we();return E(Je,{onSuccess:o=>{const t=_.ME,a=e.getQueryData(t);!a||e.setQueryData(t,()=>$($({},a),o))}})};const We={key:0,class:"container"},De={key:1,class:"container"},Ce={class:"row q-mt-xl"},Be=B({setup(e){const{data:o,isLoading:t}=ze(),{data:a,isLoading:d}=$e(),{data:p,isLoading:k}=Ze(),V=Fe(()=>t.value||d.value||k.value),w=_e(),{t:c}=K(),g=M(),m=y({});xe(p,()=>{var n,i,h;m.value={mobile:(n=p.value)==null?void 0:n.mobile,name:(i=p.value)==null?void 0:i.name,sex:(h=p.value)==null?void 0:h.sex}});const b=y(null),W=[n=>!!n||c("this_field_is_required"),n=>je.test(n)||c("this_is_invalid_value")],v=y(null),r=[n=>!!n||c("this_field_is_required"),n=>n.length<=100||c("this_field_is_required")],u=y(null),X=[n=>Object.values(R).some(i=>typeof i=="number"&&i===n)||c("this_is_invalid_value")],z=()=>{var n,i,h,j,q,f;(n=v.value)==null||n.validate(),(i=b.value)==null||i.validate(),(h=u.value)==null||h.validate(),!(((j=v.value)==null?void 0:j.error)||((q=b.value)==null?void 0:q.error)||((f=u.value)==null?void 0:f.error))&&w.mutate(m.value,{onSuccess:()=>{g.notify({message:c("saved"),position:"bottom-right",type:"positive",actions:[{label:"Dismiss",color:"white"}]})},onError:()=>{g.notify({message:c("failed_to_save"),position:"bottom-right",type:"negative",actions:[{label:"Dismiss",color:"white"}]})}})};return(n,i)=>(x(),N(I,{onSubmit:z},{default:L(()=>{var h,j,q;return[s(V)?(x(),J("div",We,[(x(),J(Qe,null,Ve(5,f=>l(ge,{key:f,type:"QInput"})),64))])):(x(),J("div",De,[l(F,{ref_key:"nameField",ref:v,modelValue:m.value.name,"onUpdate:modelValue":i[0]||(i[0]=f=>m.value.name=f),label:s(c)("name"),rules:r},null,8,["modelValue","label"]),l(F,{"model-value":(h=s(p))==null?void 0:h.email,label:s(c)("email"),disable:""},null,8,["model-value","label"]),l(F,{ref_key:"mobileField",ref:b,modelValue:m.value.mobile,"onUpdate:modelValue":i[1]||(i[1]=f=>m.value.mobile=f),label:s(c)("mobile"),rules:W,mask:"### - ### - ####","unmasked-value":""},null,8,["modelValue","label"]),l(Y,{ref_key:"sexField",ref:u,modelValue:m.value.sex,"onUpdate:modelValue":i[2]||(i[2]=f=>m.value.sex=f),label:s(c)("gender"),rules:X,options:(j=s(a))==null?void 0:j.genderOptions,"map-options":"","option-label":"name","emit-value":""},null,8,["modelValue","label","options"]),l(Y,{"model-value":(q=s(p))==null?void 0:q.profile.id,label:s(c)("role"),options:s(o),"map-options":"","option-label":"name","option-value":"id","emit-value":"",disable:""},null,8,["model-value","label","options"])])),Q("div",Ce,[l(S,{label:s(c)("save"),color:"orange-9",type:"submit",class:"q-ml-auto",loading:s(w).isLoading.value,disable:s(V)},null,8,["label","loading","disable"])])]}),_:1}))}});var Ue=G(Be,[["__scopeId","data-v-44dcc09a"]]);const He=async e=>{const{data:o}=await Z.put("/accounts/me/update-password",e);return o},Ke=()=>E(He);const Ge={class:"container"},Re={class:"row q-mt-xl"},Pe=B({setup(e){const{t:o}=K(),t=M(),a=Ke(),d=y({current_password:"",new_password:"",re_enter_password:""}),p=y(null),k=y(null),V=[v=>!!v||o("this_field_is_required"),v=>6<=v.length||o("this_value_is_too_short")],w=y(null),c=[v=>v===d.value.new_password||o("this_is_invalid_value")],g=y(!1),m=y(!1),b=y(!1),W=()=>{var u,X,z,n,i,h;if((u=p.value)==null||u.validate(),(X=k.value)==null||X.validate(),(z=w.value)==null||z.validate(),((n=p.value)==null?void 0:n.error)||((i=k.value)==null?void 0:i.error)||((h=w.value)==null?void 0:h.error))return;const{current_password:v,new_password:r}=d.value;a.mutate({current_password:v,new_password:r},{onSuccess:()=>{t.notify({message:o("saved"),position:"bottom-right",type:"positive",actions:[{label:"Dismiss",color:"white"}]})},onError:()=>{t.notify({message:o("failed_to_save"),position:"bottom-right",type:"negative",actions:[{label:"Dismiss",color:"white"}]})}})};return(v,r)=>(x(),N(I,{onSubmit:W},{default:L(()=>[Q("div",Ge,[l(F,{ref_key:"currentPasswordField",ref:p,modelValue:d.value.current_password,"onUpdate:modelValue":r[1]||(r[1]=u=>d.value.current_password=u),label:s(o)("current_password"),rules:V,type:g.value?"text":"password"},{append:L(()=>[l(U,{name:g.value?"visibility":"visibility_off",class:"cursor-pointer",onClick:r[0]||(r[0]=u=>g.value=!g.value)},null,8,["name"])]),_:1},8,["modelValue","label","type"]),l(F,{ref_key:"newPasswordField",ref:k,modelValue:d.value.new_password,"onUpdate:modelValue":r[3]||(r[3]=u=>d.value.new_password=u),label:s(o)("new_password"),rules:V,type:b.value?"text":"password"},{append:L(()=>[l(U,{name:b.value?"visibility":"visibility_off",class:"cursor-pointer",onClick:r[2]||(r[2]=u=>b.value=!b.value)},null,8,["name"])]),_:1},8,["modelValue","label","type"]),l(F,{ref_key:"reEnterPasswordField",ref:w,modelValue:d.value.re_enter_password,"onUpdate:modelValue":r[5]||(r[5]=u=>d.value.re_enter_password=u),label:s(o)("re-enter_password"),rules:c,type:m.value?"text":"password"},{append:L(()=>[l(U,{name:m.value?"visibility":"visibility_off",class:"cursor-pointer",onClick:r[4]||(r[4]=u=>m.value=!m.value)},null,8,["name"])]),_:1},8,["modelValue","label","type"])]),Q("div",Re,[l(S,{label:s(o)("save"),color:"orange-9",type:"submit",class:"q-ml-auto",loading:s(a).isLoading.value},null,8,["label","loading"])])]),_:1}))}});var Ae=G(Pe,[["__scopeId","data-v-5b3985c8"]]);const Me={class:"wrapper"},Ye={name:"Profile"},Ee=B(D($({},Ye),{setup(e){const{t:o}=K();return(t,a)=>(x(),J("div",Me,[Q("h4",null,H(s(o)("my_account")),1),Q("h6",null,H(s(o)("basic_info")),1),l(Ue),Q("h6",null,H(s(o)("change_password")),1),l(Ae)]))}}));var ro=G(Ee,[["__scopeId","data-v-8897c040"]]);export{ro as default};
