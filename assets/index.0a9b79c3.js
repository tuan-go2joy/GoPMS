var _l=Object.defineProperty,hl=Object.defineProperties;var Sl=Object.getOwnPropertyDescriptors;var rt=Object.getOwnPropertySymbols;var wl=Object.prototype.hasOwnProperty,ql=Object.prototype.propertyIsEnumerable;var nt=(e,l,t)=>l in e?_l(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,p=(e,l)=>{for(var t in l||(l={}))wl.call(l,t)&&nt(e,t,l[t]);if(rt)for(var t of rt(l))ql.call(l,t)&&nt(e,t,l[t]);return e},N=(e,l)=>hl(e,Sl(l));import{a8 as Z,m as d,ab as s,as as ee,ap as ie,aq as se,l as I,b2 as Cl,a4 as H,aj as Ce,aI as pl,aP as pe,a6 as le,_ as je,aH as Ae,b3 as kl,T as ke,b4 as xl,b5 as it,aK as st,am as ut,a5 as ct,z as dt,a7 as ft,a9 as vt,ai as mt,b6 as Pl,b7 as gt,b8 as Rl,ae as ue,q as X,x as bt,b9 as Ol,ba as Vl,u as P,d as yt,bb as _t,o as z,n as W,w as Q,$ as ht,bc as ne,bd as ae,a as T,aM as Fl,D as xe,R as St,E as Pe,G as te,B as ce,C as de,r as Bl,c as Ie,be as wt,F as qt,K as Ct,j as pt,S as kt,A as xt}from"./vendor.c8a9d970.js";import{h as $l,l as El,b as Pt,m as Rt,e as Ot,Q as Vt}from"./index.81cacef1.js";import{a as ze,Q as U,u as Ft,r as Re}from"./index.76f5ac2d.js";import{u as Bt,a as Tl}from"./useRoomsQuery.f5ef966f.js";import{u as $t,a as Ml}from"./useNotify.2d4fb18f.js";import{u as Ql,a as Dl,i as He,b as Et,c as Tt,Q as Ll}from"./QSelect.da68c64f.js";import"./QDialog.d32564a8.js";const Nl=["top","middle","bottom"];var Mt=Z({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Nl.includes(e)}},setup(e,{slots:l}){const t=d(()=>e.align!==void 0?{verticalAlign:e.align}:null),r=d(()=>{const o=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(o!==void 0?` text-${o}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>s("div",{class:r.value,style:t.value,role:"alert","aria-label":e.label},e.label!==void 0?e.label:ee(l.default))}}),jl=Z({name:"QSplitter",props:N(p({},ie),{modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]}),emits:["update:modelValue"],setup(e,{slots:l,emit:t}){const{proxy:{$q:r}}=le(),o=se(e,r),n=I(null),u={before:I(null),after:I(null)},f=d(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(o.value===!0?" q-splitter--dark":"")),c=d(()=>e.horizontal===!0?"height":"width"),m=d(()=>e.reverse!==!0?"before":"after"),i=d(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function g(_){return(e.unit==="%"?_:Math.round(_))+e.unit}const h=d(()=>({[m.value]:{[c.value]:g(e.modelValue)}}));let C,q,y,S,O;function D(_){if(_.isFirst===!0){const F=n.value.getBoundingClientRect()[c.value];C=e.horizontal===!0?"up":"left",q=e.unit==="%"?100:F,y=Math.min(q,i.value[1],Math.max(i.value[0],e.modelValue)),S=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:r.lang.rtl===!0?-1:1)*(e.unit==="%"?F===0?0:100/F:1),n.value.classList.add("q-splitter--active");return}if(_.isFinal===!0){O!==e.modelValue&&t("update:modelValue",O),n.value.classList.remove("q-splitter--active");return}const V=y+S*(_.direction===C?-1:1)*_.distance[e.horizontal===!0?"y":"x"];O=Math.min(q,i.value[1],Math.max(i.value[0],V)),u[m.value].value.style[c.value]=g(O),e.emitImmediately===!0&&e.modelValue!==O&&t("update:modelValue",O)}const L=d(()=>[[Cl,D,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function R(_,V){_<V[0]?t("update:modelValue",V[0]):_>V[1]&&t("update:modelValue",V[1])}return H(()=>e.modelValue,_=>{R(_,i.value)}),H(()=>e.limits,()=>{Ce(()=>{R(e.modelValue,i.value)})}),()=>{const _=[s("div",{ref:u.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:h.value.before},ee(l.before)),s("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[pl("div",{class:"q-splitter__separator-area absolute-full"},ee(l.separator),"sep",e.disable!==!0,()=>L.value)]),s("div",{ref:u.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:h.value.after},ee(l.after))];return s("div",{class:f.value,ref:n},pe(l.default,_))}}});const Al=async e=>{const{data:l}=await ze.post("/rooms/floor/create/",e);return l},Il=()=>{const e=Ae(),l=r=>{const o=e.getQueryData(U.FLOORS);!o||e.setQueryData(U.FLOORS,()=>[...o,p({},r)])},t=r=>{const o=e.getQueryData(U.ROOMS);!o||e.setQueryData(U.ROOMS,()=>[...o,{room_floor_id:r.id,room_floor_name:r.name,list_rooms:[]}])};return je(Al,{onSuccess:r=>{l(r),t(r)}})};var zl=Z({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:l,emit:t}){const r=le(),{proxy:{$q:o}}=r;return()=>{if(e.props===void 0)return s("th",{class:e.autoWidth===!0?"q-table--col-auto-width":""},ee(l.default));let n,u;const f=r.vnode.key;if(f){if(n=e.props.colsMap[f],n===void 0)return}else n=e.props.col;if(n.sortable===!0){const m=n.align==="right"?"unshift":"push";u=kl(l.default,[]),u[m](s(ke,{class:n.__iconClass,name:o.iconSet.table.arrowUp}))}else u=ee(l.default);const c={class:n.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:n.headerStyle,onClick:m=>{n.sortable===!0&&e.props.sort(n),t("click",m)}};return s("th",c,u)}}});const Hl=["horizontal","vertical","cell","none"];var Ul=Z({name:"QMarkupTable",props:N(p({},ie),{dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>Hl.includes(e)}}),setup(e,{slots:l}){const t=le(),r=se(e,t.proxy.$q),o=d(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(r.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>s("div",{class:o.value},[s("table",{class:"q-table"},ee(l.default))])}});function Qt(e,l){return s("div",e,[s("table",{class:"q-table"},l)])}const Kl={list:dt,table:Ul},Wl=["list","table","__qtable"];var Gl=Z({name:"QVirtualScroll",props:N(p({},Ql),{type:{type:String,default:"list",validator:e=>Wl.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}}),setup(e,{slots:l,attrs:t}){let r;const o=I(null),n=d(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:u,localResetVirtualScroll:f,padVirtualScroll:c,onVirtualScrollEvt:m}=Dl({virtualScrollLength:n,getVirtualScrollTarget:q,getVirtualScrollEl:C}),i=d(()=>{if(n.value===0)return[];const D=(L,R)=>({index:u.value.from+R,item:L});return e.itemsFn===void 0?e.items.slice(u.value.from,u.value.to).map(D):e.itemsFn(u.value.from,u.value.to-u.value.from).map(D)}),g=d(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),h=d(()=>e.scrollTarget!==void 0?{}:{tabindex:0});H(n,()=>{f()}),H(()=>e.scrollTarget,()=>{S(),y()});function C(){return o.value.$el||o.value}function q(){return r}function y(){r=xl(C(),e.scrollTarget),r.addEventListener("scroll",m,it.passive)}function S(){r!==void 0&&(r.removeEventListener("scroll",m,it.passive),r=void 0)}function O(){let D=c(e.type==="list"?"div":"tbody",i.value.map(l.default));return l.before!==void 0&&(D=l.before().concat(D)),pe(l.after,D)}return st(()=>{f()}),ut(()=>{y()}),ct(()=>{S()}),()=>{if(l.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?Qt({ref:o,class:"q-table__middle "+g.value},O()):s(Kl[e.type],p(N(p({},t),{ref:o,class:[t.class,g.value]}),h.value),O)}}});const Yl={xs:2,sm:4,md:6,lg:10,xl:14};function Dt(e,l,t){return{transform:l===!0?`translateX(${t.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var Xl=Z({name:"QLinearProgress",props:N(p(p({},ie),ft),{value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean}),setup(e,{slots:l}){const{proxy:t}=le(),r=se(e,t.$q),o=vt(e,Yl),n=d(()=>e.indeterminate===!0||e.query===!0),u=d(()=>e.reverse!==e.query),f=d(()=>N(p({},o.value!==null?o.value:{}),{"--q-linear-progress-speed":`${e.animationSpeed}ms`})),c=d(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),m=d(()=>Dt(e.buffer!==void 0?e.buffer:1,u.value,t.$q)),i=d(()=>`q-linear-progress__track absolute-full q-linear-progress__track--with${e.instantFeedback===!0?"out":""}-transition q-linear-progress__track--${r.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),g=d(()=>Dt(n.value===!0?1:e.value,u.value,t.$q)),h=d(()=>`q-linear-progress__model absolute-full q-linear-progress__model--with${e.instantFeedback===!0?"out":""}-transition q-linear-progress__model--${n.value===!0?"in":""}determinate`),C=d(()=>({width:`${e.value*100}%`})),q=d(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"}`);return()=>{const y=[s("div",{class:i.value,style:m.value}),s("div",{class:h.value,style:g.value})];return e.stripe===!0&&n.value===!1&&y.push(s("div",{class:q.value,style:C.value})),s("div",{class:c.value,style:f.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},pe(l.default,y))}}});function Jl(e,l){const t=I(null),r=d(()=>e.disable!==!0?null:s("span",{ref:t,class:"no-outline",tabindex:-1}));function o(n){const u=l.value;n!==void 0&&n.type.indexOf("key")===0?u!==null&&document.activeElement!==u&&u.contains(document.activeElement)===!0&&u.focus():t.value!==null&&(n===void 0||u!==null&&u.contains(n.target)===!0)&&t.value.focus()}return{refocusTargetEl:r,refocusTarget:o}}var Zl={xs:30,sm:35,md:40,lg:50,xl:60};const ea=N(p(p(p({},ie),ft),$l),{modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]}),ta=["update:modelValue"];function la(e,l){const{props:t,slots:r,emit:o,proxy:n}=le(),{$q:u}=n,f=se(t,u),c=I(null),{refocusTargetEl:m,refocusTarget:i}=Jl(t,c),g=vt(t,Zl),h=d(()=>t.val!==void 0&&Array.isArray(t.modelValue)),C=d(()=>h.value===!0?t.modelValue.indexOf(t.val):-1),q=d(()=>h.value===!0?C.value>-1:t.modelValue===t.trueValue),y=d(()=>h.value===!0?C.value===-1:t.modelValue===t.falseValue),S=d(()=>q.value===!1&&y.value===!1),O=d(()=>t.disable===!0?-1:t.tabindex||0),D=d(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(t.disable===!0?" disabled":"")+(f.value===!0?` q-${e}--dark`:"")+(t.dense===!0?` q-${e}--dense`:"")+(t.leftLabel===!0?" reverse":"")),L=d(()=>{const x=q.value===!0?"truthy":y.value===!0?"falsy":"indet",J=t.color!==void 0&&(t.keepColor===!0||(e==="toggle"?q.value===!0:y.value!==!0))?` text-${t.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${x}${J}`}),R=d(()=>{const x={type:"checkbox"};return t.name!==void 0&&Object.assign(x,{"^checked":q.value===!0?"checked":void 0,name:t.name,value:h.value===!0?t.val:t.trueValue}),x}),_=El(R),V=d(()=>{const x={tabindex:O.value,role:"checkbox","aria-label":t.label,"aria-checked":S.value===!0?"mixed":q.value===!0?"true":"false"};return t.disable===!0&&(x["aria-disabled"]="true"),x});function F(x){x!==void 0&&(mt(x),i(x)),t.disable!==!0&&o("update:modelValue",B(),x)}function B(){if(h.value===!0){if(q.value===!0){const x=t.modelValue.slice();return x.splice(C.value,1),x}return t.modelValue.concat([t.val])}if(q.value===!0){if(t.toggleOrder!=="ft"||t.toggleIndeterminate===!1)return t.falseValue}else if(y.value===!0){if(t.toggleOrder==="ft"||t.toggleIndeterminate===!1)return t.trueValue}else return t.toggleOrder!=="ft"?t.trueValue:t.falseValue;return t.indeterminateValue}function $(x){(x.keyCode===13||x.keyCode===32)&&mt(x)}function j(x){(x.keyCode===13||x.keyCode===32)&&F(x)}const K=l(q,S);return Object.assign(n,{toggle:F}),()=>{const x=K();t.disable!==!0&&_(x,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const J=[s("div",{class:L.value,style:g.value},x)];m.value!==null&&J.push(m.value);const me=t.label!==void 0?pe(r.default,[t.label]):ee(r.default);return me!==void 0&&J.push(s("div",{class:`q-${e}__label q-anchor--skip`},me)),s("div",N(p({ref:c,class:D.value},V.value),{onClick:F,onKeydown:$,onKeyup:j}),J)}}const aa=s("div",{class:"q-checkbox__bg absolute"},[s("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24","aria-hidden":"true"},[s("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),s("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var Ue=Z({name:"QCheckbox",props:ea,emits:ta,setup(){return la("checkbox",()=>()=>[aa])}});let fe=0;const oa={fullscreen:Boolean,noRouteFullscreenExit:Boolean},ra=["update:fullscreen","fullscreen"];function na(){const e=le(),{props:l,emit:t,proxy:r}=e;let o,n,u;const f=I(!1);Pl(e)===!0&&H(()=>r.$route,()=>{l.noRouteFullscreenExit!==!0&&i()}),H(()=>l.fullscreen,g=>{f.value!==g&&c()}),H(f,g=>{t("update:fullscreen",g),t("fullscreen",g)});function c(){f.value===!0?i():m()}function m(){f.value!==!0&&(f.value=!0,u=r.$el.parentNode,u.replaceChild(n,r.$el),document.body.appendChild(r.$el),fe++,fe===1&&document.body.classList.add("q-body--fullscreen-mixin"),o={handler:i},gt.add(o))}function i(){f.value===!0&&(o!==void 0&&(gt.remove(o),o=void 0),u.replaceChild(r.$el,n),f.value=!1,fe=Math.max(0,fe-1),fe===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),r.$el.scrollIntoView!==void 0&&setTimeout(()=>{r.$el.scrollIntoView()})))}return st(()=>{n=document.createElement("span")}),ut(()=>{l.fullscreen===!0&&m()}),ct(i),Object.assign(r,{toggleFullscreen:c,setFullscreen:m,exitFullscreen:i}),{inFullscreen:f,toggleFullscreen:c}}function ia(e,l){return new Date(e)-new Date(l)}const sa={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function ua(e,l,t,r){const o=d(()=>{const{sortBy:f}=l.value;return f&&t.value.find(c=>c.name===f)||null}),n=d(()=>e.sortMethod!==void 0?e.sortMethod:(f,c,m)=>{const i=t.value.find(C=>C.name===c);if(i===void 0||i.field===void 0)return f;const g=m===!0?-1:1,h=typeof i.field=="function"?C=>i.field(C):C=>C[i.field];return f.sort((C,q)=>{let y=h(C),S=h(q);return y==null?-1*g:S==null?1*g:i.sort!==void 0?i.sort(y,S,C,q)*g:He(y)===!0&&He(S)===!0?(y-S)*g:Et(y)===!0&&Et(S)===!0?ia(y,S)*g:typeof y=="boolean"&&typeof S=="boolean"?(y-S)*g:([y,S]=[y,S].map(O=>(O+"").toLocaleString().toLowerCase()),y<S?-1*g:y===S?0:g)})});function u(f){let c=e.columnSortOrder;if(f===Object(f))f.sortOrder&&(c=f.sortOrder),f=f.name;else{const g=t.value.find(h=>h.name===f);g!==void 0&&g.sortOrder&&(c=g.sortOrder)}let{sortBy:m,descending:i}=l.value;m!==f?(m=f,i=c==="da"):e.binaryStateSort===!0?i=!i:i===!0?c==="ad"?m=null:i=!1:c==="ad"?i=!0:m=null,r({sortBy:m,descending:i,page:1})}return{columnToSort:o,computedSortMethod:n,sort:u}}const ca={filter:[String,Object],filterMethod:Function};function da(e,l){const t=d(()=>e.filterMethod!==void 0?e.filterMethod:(r,o,n,u)=>{const f=o?o.toLowerCase():"";return r.filter(c=>n.some(m=>{const i=u(m,c)+"";return(i==="undefined"||i==="null"?"":i.toLowerCase()).indexOf(f)!==-1}))});return H(()=>e.filter,()=>{Ce(()=>{l({page:1},!0)})},{deep:!0}),{computedFilterMethod:t}}function fa(e,l){for(const t in l)if(l[t]!==e[t])return!1;return!0}function Lt(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const va={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function ma(e,l){const{props:t,emit:r}=e,o=I(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:t.rowsPerPageOptions.length>0?t.rowsPerPageOptions[0]:5},t.pagination)),n=d(()=>{const i=t["onUpdate:pagination"]!==void 0?p(p({},o.value),t.pagination):o.value;return Lt(i)}),u=d(()=>n.value.rowsNumber!==void 0);function f(i){c({pagination:i,filter:t.filter})}function c(i={}){Ce(()=>{r("request",{pagination:i.pagination||n.value,filter:i.filter||t.filter,getCellValue:l})})}function m(i,g){const h=Lt(p(p({},n.value),i));if(fa(n.value,h)===!0){u.value===!0&&g===!0&&f(h);return}if(u.value===!0){f(h);return}t.pagination!==void 0&&t["onUpdate:pagination"]!==void 0?r("update:pagination",h):o.value=h}return{innerPagination:o,computedPagination:n,isServerSide:u,requestServerInteraction:c,setPagination:m}}function ga(e,l,t,r,o,n){const{props:u,emit:f,proxy:{$q:c}}=e,m=d(()=>r.value===!0?t.value.rowsNumber||0:n.value),i=d(()=>{const{page:R,rowsPerPage:_}=t.value;return(R-1)*_}),g=d(()=>{const{page:R,rowsPerPage:_}=t.value;return R*_}),h=d(()=>t.value.page===1),C=d(()=>t.value.rowsPerPage===0?1:Math.max(1,Math.ceil(m.value/t.value.rowsPerPage))),q=d(()=>g.value===0?!0:t.value.page>=C.value),y=d(()=>(u.rowsPerPageOptions.includes(l.value.rowsPerPage)?u.rowsPerPageOptions:[l.value.rowsPerPage].concat(u.rowsPerPageOptions)).map(_=>({label:_===0?c.lang.table.allRows:""+_,value:_})));H(C,(R,_)=>{if(R===_)return;const V=t.value.page;R&&!V?o({page:1}):R<V&&o({page:R})});function S(){o({page:1})}function O(){const{page:R}=t.value;R>1&&o({page:R-1})}function D(){const{page:R,rowsPerPage:_}=t.value;g.value>0&&R*_<m.value&&o({page:R+1})}function L(){o({page:C.value})}return u["onUpdate:pagination"]!==void 0&&f("update:pagination",p({},t.value)),{firstRowIndex:i,lastRowIndex:g,isFirstPage:h,isLastPage:q,pagesNumber:C,computedRowsPerPageOptions:y,computedRowsNumber:m,firstPage:S,prevPage:O,nextPage:D,lastPage:L}}const ba={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},ya=["update:selected","selection"];function _a(e,l,t,r){const o=d(()=>{const q={};return e.selected.map(r.value).forEach(y=>{q[y]=!0}),q}),n=d(()=>e.selection!=="none"),u=d(()=>e.selection==="single"),f=d(()=>e.selection==="multiple"),c=d(()=>t.value.length>0&&t.value.every(q=>o.value[r.value(q)]===!0)),m=d(()=>c.value!==!0&&t.value.some(q=>o.value[r.value(q)]===!0)),i=d(()=>e.selected.length);function g(q){return o.value[q]===!0}function h(){l("update:selected",[])}function C(q,y,S,O){l("selection",{rows:y,added:S,keys:q,evt:O});const D=u.value===!0?S===!0?y:[]:S===!0?e.selected.concat(y):e.selected.filter(L=>q.includes(r.value(L))===!1);l("update:selected",D)}return{hasSelectionMode:n,singleSelection:u,multipleSelection:f,allRowsSelected:c,someRowsSelected:m,rowsSelectedNumber:i,isRowSelected:g,clearSelection:h,updateSelection:C}}function Nt(e){return Array.isArray(e)?e.slice():[]}const ha={expanded:Array},Sa=["update:expanded"];function wa(e,l){const t=I(Nt(e.expanded));H(()=>e.expanded,u=>{t.value=Nt(u)});function r(u){return t.value.includes(u)}function o(u){e.expanded!==void 0?l("update:expanded",u):t.value=u}function n(u,f){const c=t.value.slice(),m=c.indexOf(u);f===!0?m===-1&&(c.push(u),o(c)):m!==-1&&(c.splice(m,1),o(c))}return{isRowExpanded:r,setExpanded:o,updateExpanded:n}}const qa={visibleColumns:Array};function Ca(e,l,t){const r=d(()=>{if(e.columns!==void 0)return e.columns;const f=e.rows[0];return f!==void 0?Object.keys(f).map(c=>({name:c,label:c.toUpperCase(),field:c,align:He(f[c])?"right":"left",sortable:!0})):[]}),o=d(()=>{const{sortBy:f,descending:c}=l.value;return(e.visibleColumns!==void 0?r.value.filter(i=>i.required===!0||e.visibleColumns.includes(i.name)===!0):r.value).map(i=>{const g=i.align||"right",h=`text-${g}`;return N(p({},i),{align:g,__iconClass:`q-table__sort-icon q-table__sort-icon--${g}`,__thClass:h+(i.headerClasses!==void 0?" "+i.headerClasses:"")+(i.sortable===!0?" sortable":"")+(i.name===f?` sorted ${c===!0?"sort-desc":""}`:""),__tdStyle:i.style!==void 0?typeof i.style!="function"?()=>i.style:i.style:()=>null,__tdClass:i.classes!==void 0?typeof i.classes!="function"?()=>h+" "+i.classes:C=>h+" "+i.classes(C):()=>h})})}),n=d(()=>{const f={};return o.value.forEach(c=>{f[c.name]=c}),f}),u=d(()=>e.tableColspan!==void 0?e.tableColspan:o.value.length+(t.value===!0?1:0));return{colList:r,computedCols:o,computedColsMap:n,computedColspan:u}}const Oe="q-table__bottom row items-center",jt={};Tt.forEach(e=>{jt[e]={}});var pa=Z({name:"QTable",props:p(p(p(p(p(p(p(p(N(p({rows:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean},jt),{noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function}),ie),oa),qa),ca),va),ha),ba),sa),emits:["request","virtual-scroll",...ra,...Sa,...ya],setup(e,{slots:l,emit:t}){const r=le(),{proxy:{$q:o}}=r,n=se(e,o),{inFullscreen:u,toggleFullscreen:f}=na(),c=d(()=>typeof e.rowKey=="function"?e.rowKey:a=>a[e.rowKey]),m=I(null),i=I(null),g=d(()=>e.grid!==!0&&e.virtualScroll===!0),h=d(()=>" q-table__card"+(n.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),C=d(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.loading===!0?" q-table--loading":"")+(e.grid===!0?" q-table--grid":h.value)+(n.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(u.value===!0?" fullscreen scroll":"")),q=d(()=>C.value+(e.loading===!0?" q-table--loading":""));H(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+C.value,()=>{g.value===!0&&i.value!==null&&i.value.reset()});const{innerPagination:y,computedPagination:S,isServerSide:O,requestServerInteraction:D,setPagination:L}=ma(r,oe),{computedFilterMethod:R}=da(e,L),{isRowExpanded:_,setExpanded:V,updateExpanded:F}=wa(e,t),B=d(()=>{let a=e.rows;if(O.value===!0||a.length===0)return a;const{sortBy:v,descending:b}=S.value;return e.filter&&(a=R.value(a,e.filter,G.value,oe)),Jt.value!==null&&(a=Zt.value(e.rows===a?a.slice():a,v,b)),a}),$=d(()=>B.value.length),j=d(()=>{let a=B.value;if(O.value===!0)return a;const{rowsPerPage:v}=S.value;return v!==0&&(be.value===0&&e.rows!==a?a.length>ye.value&&(a=a.slice(0,ye.value)):a=a.slice(be.value,ye.value)),a}),{hasSelectionMode:K,singleSelection:x,multipleSelection:J,allRowsSelected:me,someRowsSelected:Ye,rowsSelectedNumber:Ve,isRowSelected:Fe,clearSelection:Yt,updateSelection:ge}=_a(e,t,j,c),{colList:Xt,computedCols:G,computedColsMap:Xe,computedColspan:Je}=Ca(e,S,K),{columnToSort:Jt,computedSortMethod:Zt,sort:Be}=ua(e,S,Xt,L),{firstRowIndex:be,lastRowIndex:ye,isFirstPage:$e,isLastPage:Ee,pagesNumber:_e,computedRowsPerPageOptions:el,computedRowsNumber:he,firstPage:Te,prevPage:Me,nextPage:Qe,lastPage:De}=ga(r,y,S,O,L,$),tl=d(()=>j.value.length===0),ll=d(()=>{const a={};return Tt.forEach(v=>{a[v]=e[v]}),a.virtualScrollItemSize===void 0&&(a.virtualScrollItemSize=e.dense===!0?28:48),a});function al(){g.value===!0&&i.value.reset()}function ol(){if(e.grid===!0)return bl();const a=e.hideHeader!==!0?at:null;if(g.value===!0){const b=l["top-row"],w=l["bottom-row"],k={default:M=>et(M.item,l.body,M.index)};if(b!==void 0){const M=s("tbody",b({cols:G.value}));k.before=a===null?()=>M:()=>[a()].concat(M)}else a!==null&&(k.before=a);return w!==void 0&&(k.after=()=>s("tbody",w({cols:G.value}))),s(Gl,N(p({ref:i,class:e.tableClass,style:e.tableStyle},ll.value),{items:j.value,type:"__qtable",tableColspan:Je.value,onVirtualScroll:nl}),k)}const v=[il()];return a!==null&&v.unshift(a()),Qt({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},v)}function rl(a,v){if(i.value!==null){i.value.scrollTo(a,v);return}a=parseInt(a,10);const b=m.value.querySelector(`tbody tr:nth-of-type(${a+1})`);if(b!==null){const w=m.value.querySelector(".q-table__middle.scroll"),{offsetTop:k}=b,M=k<w.scrollTop?"decrease":"increase";w.scrollTop=k,t("virtual-scroll",{index:a,from:0,to:y.value.rowsPerPage-1,direction:M})}}function nl(a){t("virtual-scroll",a)}function Ze(){return[s(Xl,{class:"q-table__linear-progress",color:e.color,dark:n.value,indeterminate:!0,trackColor:"transparent"})]}function et(a,v,b){const w=c.value(a),k=Fe(w);if(v!==void 0)return v(tt({key:w,row:a,pageIndex:b,__trClass:k?"selected":""}));const M=l["body-cell"],E=G.value.map(A=>{const we=l[`body-cell-${A.name}`],qe=we!==void 0?we:M;return qe!==void 0?qe(sl({key:w,row:a,pageIndex:b,col:A})):s("td",{class:A.__tdClass(a),style:A.__tdStyle(a)},oe(A,a))});if(K.value===!0){const A=l["body-selection"],we=A!==void 0?A(ul({key:w,row:a,pageIndex:b})):[s(Ue,{modelValue:k,color:e.color,dark:n.value,dense:e.dense,"onUpdate:modelValue":(qe,yl)=>{ge([w],[a],qe,yl)}})];E.unshift(s("td",{class:"q-table--col-auto-width"},we))}const Y={key:w,class:{selected:k}};return e.onRowClick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onClick=A=>{t("RowClick",A,a,b)}),e.onRowDblclick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onDblclick=A=>{t("RowDblclick",A,a,b)}),e.onRowContextmenu!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onContextmenu=A=>{t("RowContextmenu",A,a,b)}),s("tr",Y,E)}function il(){const a=l.body,v=l["top-row"],b=l["bottom-row"];let w=j.value.map((k,M)=>et(k,a,M));return v!==void 0&&(w=v({cols:G.value}).concat(w)),b!==void 0&&(w=w.concat(b({cols:G.value}))),s("tbody",w)}function tt(a){return Le(a),a.cols=a.cols.map(v=>{const b=p({},v);return ue(b,"value",()=>oe(v,a.row)),b}),a}function sl(a){return Le(a),ue(a,"value",()=>oe(a.col,a.row)),a}function ul(a){return Le(a),a}function Le(a){Object.assign(a,{cols:G.value,colsMap:Xe.value,sort:Be,rowIndex:be.value+a.pageIndex,color:e.color,dark:n.value,dense:e.dense}),K.value===!0&&ue(a,"selected",()=>Fe(a.key),(v,b)=>{ge([a.key],[a.row],v,b)}),ue(a,"expand",()=>_(a.key),v=>{F(a.key,v)})}function oe(a,v){const b=typeof a.field=="function"?a.field(v):v[a.field];return a.format!==void 0?a.format(b,v):b}const re=d(()=>({pagination:S.value,pagesNumber:_e.value,isFirstPage:$e.value,isLastPage:Ee.value,firstPage:Te,prevPage:Me,nextPage:Qe,lastPage:De,inFullscreen:u.value,toggleFullscreen:f}));function cl(){const a=l.top,v=l["top-left"],b=l["top-right"],w=l["top-selection"],k=K.value===!0&&w!==void 0&&Ve.value>0,M="q-table__top relative-position row items-center";if(a!==void 0)return s("div",{class:M},[a(re.value)]);let E;if(k===!0?E=w(re.value).slice():(E=[],v!==void 0?E.push(s("div",{class:"q-table-control"},[v(re.value)])):e.title&&E.push(s("div",{class:"q-table__control"},[s("div",{class:["q-table__title",e.titleClass]},e.title)]))),b!==void 0&&(E.push(s("div",{class:"q-table__separator col"})),E.push(s("div",{class:"q-table__control"},[b(re.value)]))),E.length!==0)return s("div",{class:M},E)}const lt=d(()=>Ye.value===!0?null:me.value);function at(){const a=dl();return e.loading===!0&&l.loading===void 0&&a.push(s("tr",{class:"q-table__progress"},[s("th",{class:"relative-position",colspan:Je.value},Ze())])),s("thead",a)}function dl(){const a=l.header,v=l["header-cell"];if(a!==void 0)return a(Ne({header:!0})).slice();const b=G.value.map(w=>{const k=l[`header-cell-${w.name}`],M=k!==void 0?k:v,E=Ne({col:w});return M!==void 0?M(E):s(zl,{key:w.name,props:E},()=>w.label)});if(x.value===!0&&e.grid!==!0)b.unshift(s("th",{class:"q-table--col-auto-width"}," "));else if(J.value===!0){const w=l["header-selection"],k=w!==void 0?w(Ne({})):[s(Ue,{color:e.color,modelValue:lt.value,dark:n.value,dense:e.dense,"onUpdate:modelValue":ot})];b.unshift(s("th",{class:"q-table--col-auto-width"},k))}return[s("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},b)]}function Ne(a){return Object.assign(a,{cols:G.value,sort:Be,colsMap:Xe.value,color:e.color,dark:n.value,dense:e.dense}),J.value===!0&&ue(a,"selected",()=>lt.value,ot),a}function ot(a){Ye.value===!0&&(a=!1),ge(j.value.map(c.value),j.value,a)}const Se=d(()=>{const a=[e.iconFirstPage||o.iconSet.table.firstPage,e.iconPrevPage||o.iconSet.table.prevPage,e.iconNextPage||o.iconSet.table.nextPage,e.iconLastPage||o.iconSet.table.lastPage];return o.lang.rtl===!0?a.reverse():a});function fl(){if(e.hideBottom===!0)return;if(tl.value===!0){if(e.hideNoData===!0)return;const b=e.loading===!0?e.loadingLabel||o.lang.table.loading:e.filter?e.noResultsLabel||o.lang.table.noResults:e.noDataLabel||o.lang.table.noData,w=l["no-data"],k=w!==void 0?[w({message:b,icon:o.iconSet.table.warning,filter:e.filter})]:[s(ke,{class:"q-table__bottom-nodata-icon",name:o.iconSet.table.warning}),b];return s("div",{class:Oe+" q-table__bottom--nodata"},k)}const a=l.bottom;if(a!==void 0)return s("div",{class:Oe},[a(re.value)]);const v=e.hideSelectedBanner!==!0&&K.value===!0&&Ve.value>0?[s("div",{class:"q-table__control"},[s("div",[(e.selectedRowsLabel||o.lang.table.selectedRecords)(Ve.value)])])]:[];if(e.hidePagination!==!0)return s("div",{class:Oe+" justify-end"},ml(v));if(v.length>0)return s("div",{class:Oe},v)}function vl(a){L({page:1,rowsPerPage:a.value})}function ml(a){let v;const{rowsPerPage:b}=S.value,w=e.paginationLabel||o.lang.table.pagination,k=l.pagination,M=e.rowsPerPageOptions.length>1;if(a.push(s("div",{class:"q-table__separator col"})),M===!0&&a.push(s("div",{class:"q-table__control"},[s("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||o.lang.table.recordsPerPage]),s(Ll,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:b,options:el.value,displayValue:b===0?o.lang.table.allRows:b,dark:n.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":vl})])),k!==void 0)v=k(re.value);else if(v=[s("span",b!==0?{class:"q-table__bottom-item"}:{},[b?w(be.value+1,Math.min(ye.value,he.value),he.value):w(1,$.value,he.value)])],b!==0&&_e.value>1){const E={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(E.size="sm"),_e.value>2&&v.push(s(X,N(p({key:"pgFirst"},E),{icon:Se.value[0],disable:$e.value,onClick:Te}))),v.push(s(X,N(p({key:"pgPrev"},E),{icon:Se.value[1],disable:$e.value,onClick:Me})),s(X,N(p({key:"pgNext"},E),{icon:Se.value[2],disable:Ee.value,onClick:Qe}))),_e.value>2&&v.push(s(X,N(p({key:"pgLast"},E),{icon:Se.value[3],disable:Ee.value,onClick:De})))}return a.push(s("div",{class:"q-table__control"},v)),a}function gl(){const a=e.gridHeader===!0?[s("table",{class:"q-table"},[at()])]:e.loading===!0&&l.loading===void 0?Ze():void 0;return s("div",{class:"q-table__middle"},a)}function bl(){const a=l.item!==void 0?l.item:v=>{const b=v.cols.map(k=>s("div",{class:"q-table__grid-item-row"},[s("div",{class:"q-table__grid-item-title"},[k.label]),s("div",{class:"q-table__grid-item-value"},[k.value])]));if(K.value===!0){const k=l["body-selection"],M=k!==void 0?k(v):[s(Ue,{modelValue:v.selected,color:e.color,dark:n.value,dense:e.dense,"onUpdate:modelValue":(E,Y)=>{ge([v.key],[v.row],E,Y)}})];b.unshift(s("div",{class:"q-table__grid-item-row"},M),s(bt,{dark:n.value}))}const w={class:["q-table__grid-item-card"+h.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(w.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(w.onClick=k=>{t("RowClick",k,v.row,v.pageIndex)}),e.onRowDblclick!==void 0&&(w.onDblclick=k=>{t("RowDblclick",k,v.row,v.pageIndex)})),s("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(v.selected===!0?"q-table__grid-item--selected":"")},[s("div",w,b)])};return s("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},j.value.map((v,b)=>a(tt({key:c.value(v),row:v,pageIndex:b}))))}return Object.assign(r.proxy,{requestServerInteraction:D,setPagination:L,firstPage:Te,prevPage:Me,nextPage:Qe,lastPage:De,isRowSelected:Fe,clearSelection:Yt,isRowExpanded:_,setExpanded:V,sort:Be,resetVirtualScroll:al,scrollTo:rl,getCellValue:oe}),Rl(r.proxy,{filteredSortedRows:()=>B.value,computedRows:()=>j.value,computedRowsNumber:()=>he.value}),()=>{const a=[cl()],v={ref:m,class:q.value};return e.grid===!0?a.push(gl()):Object.assign(v,{class:[v.class,e.cardClass],style:e.cardStyle}),a.push(ol(),fl()),e.loading===!0&&l.loading!==void 0&&a.push(l.loading()),s("div",v,a)}}});const ka=async({floor_id:e})=>{await ze.delete(`/rooms/floor/delete/${e}`)},xa=()=>{const e=Ae(),l=r=>{const o=e.getQueryData(U.FLOORS);!o||e.setQueryData(U.FLOORS,()=>o.filter(n=>n.id!==r.floor_id))},t=r=>{const o=e.getQueryData(U.ROOMS);!o||e.setQueryData(U.ROOMS,()=>o.filter(n=>n.room_floor_id!==r.floor_id))};return je(ka,{onSuccess:(r,o)=>{l(o),t(o)}})},Pa=async({floor_id:e,name:l})=>{const{data:t}=await ze.put(`/rooms/floor/update/${e}`,{name:l});return t},Ra=()=>{const e=Ae(),l=r=>{const o=e.getQueryData(U.FLOORS);!o||e.setQueryData(U.FLOORS,()=>o.map(n=>n.id!==r.id?n:p({},r)))},t=r=>{const o=e.getQueryData(U.ROOMS);!o||e.setQueryData(U.ROOMS,()=>o.map(n=>n.room_floor_id!==r.id?n:{room_floor_id:r.id,room_floor_name:r.name,list_rooms:n.list_rooms}))};return je(Pa,{onSuccess:r=>{l(r),t(r)}})};function Oa(e){return Ol()?(Vl(e),!0):!1}const ve=typeof window!="undefined",Va=e=>typeof e=="string",Ke=()=>{};function At(e){var l;const t=P(e);return(l=t==null?void 0:t.$el)!=null?l:t}const It=ve?window:void 0;ve&&window.document;ve&&window.navigator;ve&&window.location;function zt(...e){let l,t,r,o;if(Va(e[0])?([t,r,o]=e,l=It):[l,t,r,o]=e,!l)return Ke;let n=Ke;const u=H(()=>P(l),c=>{n(),!!c&&(c.addEventListener(t,r,o),n=()=>{c.removeEventListener(t,r,o),n=Ke})},{immediate:!0,flush:"post"}),f=()=>{u(),n()};return Oa(f),f}function Fa(e,l,t={}){const{window:r=It}=t;if(!r)return;const o=I(!0),u=[zt(r,"click",c=>{const m=At(e);!m||m===c.target||c.composedPath().includes(m)||!o.value||l(c)},{passive:!0,capture:!0}),zt(r,"pointerdown",c=>{const m=At(e);o.value=!!m&&!c.composedPath().includes(m)},{passive:!0})];return()=>u.forEach(c=>c())}const We=typeof globalThis=="undefined"?void 0:globalThis,Ge="__vueuse_ssr_handlers__";We[Ge]=We[Ge]||{};We[Ge];var Ht,Ut;ve&&(window==null?void 0:window.navigator)&&((Ht=window==null?void 0:window.navigator)==null?void 0:Ht.platform)&&/iP(ad|hone|od)/.test((Ut=window==null?void 0:window.navigator)==null?void 0:Ut.platform);var Ba=Object.defineProperty,Kt=Object.getOwnPropertySymbols,$a=Object.prototype.hasOwnProperty,Ea=Object.prototype.propertyIsEnumerable,Wt=(e,l,t)=>l in e?Ba(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,Ta=(e,l)=>{for(var t in l||(l={}))$a.call(l,t)&&Wt(e,t,l[t]);if(Kt)for(var t of Kt(l))Ea.call(l,t)&&Wt(e,t,l[t]);return e};const Ma={top:0,left:0,bottom:0,right:0,height:0,width:0};Ta({text:""},Ma);const Gt=e=>{const l=I(!1),t=I(null),r=async()=>{var n;l.value=!0,await Ce(),(n=t.value)==null||n.focus()},o=()=>{l.value=!1,e==null||e.onFinishEdit()};return Fa(t,()=>o()),{inputElementRef:t,isEditMode:l,startEdit:r,finishEdit:o}},Qa=yt({props:{floorName:{type:String,required:!0},floorId:{type:Number,required:!0},rooms:{type:Array,required:!0}},setup(e){const l=e,{data:t}=Bt(),{notifySaveSuccess:r,notifySaveFailed:o,notifyWarning:n}=$t(),u=_t(),{t:f}=Ft(),c=d(()=>{const{code:F}=u.query;return!F||Array.isArray(F)?l.rooms:l.rooms.filter(({room_type_code:B})=>B===F.replaceAll("_"," "))}),{inputElementRef:m,isEditMode:i,startEdit:g,finishEdit:h}=Gt({onFinishEdit:()=>O({value:l.floorName})}),C=Ra(),q=xa(),{value:y,errorMessage:S,resetField:O,validate:D}=Pt("name",Rt(Ot.string().nonempty().max(10).refine(F=>t.value?!t.value.some(({id:B,name:$})=>B!==l.floorId&&$===F):!1)),{initialValue:l.floorName,validateOnValueUpdate:!1}),L=async F=>{const{valid:B}=await D();if(!B)return;const{value:$}=F.currentTarget;C.mutate({floor_id:l.floorId,name:$},{onSuccess:()=>{r(),h()},onError:()=>{o()}})},R=()=>{if(l.rooms.length!==0){n(f("please_remove_all_rooms_of_this_floor"));return}q.mutate({floor_id:l.floorId},{onSuccess:()=>{r()},onError:()=>{o()}})},_=(F,B)=>{Re.replace({path:`/settings/room-settings/rooms/${B.id}`,state:{roomName:B.name,floorId:l.floorId},query:u.query})},V=()=>{Re.replace({path:"/settings/room-settings/rooms/new",state:{roomName:null,floorId:l.floorId},query:u.query})};return(F,B)=>(z(),W(pa,{grid:"",title:l.floorName,rows:P(c),columns:[{name:"room_type_code",label:"Room Type Code",field:$=>$.room_type_code},{name:"name",label:"Room Name",field:$=>$.name}],"hide-pagination":"",onRowClick:_},{"top-left":Q(()=>[P(i)?(z(),W(Vt,{key:0,ref_key:"inputElementRef",ref:m,modelValue:P(y),"onUpdate:modelValue":B[0]||(B[0]=$=>ht(y)?y.value=$:null),class:"text-h5","error-message":P(S),error:!!P(S),placeholder:P(f)("input_floor_name"),filled:"",dense:"",onKeydown:[ne(ae(L,["prevent"]),["enter"]),ne(ae(P(h),["prevent"]),["esc"]),ne(ae(P(h),["prevent"]),["tab"])]},null,8,["modelValue","error-message","error","placeholder","onKeydown"])):(z(),W(X,{key:1,label:l.floorName,class:"text-h5",padding:"xs 12px","no-caps":"",dense:"",flat:"",onClick:P(g)},null,8,["label","onClick"]))]),"top-right":Q(()=>[T(X,{flat:"",round:"",icon:"more_vert"},{default:Q(()=>[T(Fl,{anchor:"bottom right",self:"top right"},{default:Q(()=>[xe((z(),W(Pe,{clickable:"",onClick:V},{default:Q(()=>[T(te,{side:""},{default:Q(()=>[T(ke,{name:"add"})]),_:1}),T(te,null,{default:Q(()=>[ce(de(P(f)("add_new_room")),1)]),_:1})]),_:1})),[[St]]),T(bt),xe((z(),W(Pe,{clickable:"",onClick:R},{default:Q(()=>[T(te,{side:""},{default:Q(()=>[T(ke,{name:"delete"})]),_:1}),T(te,null,{default:Q(()=>[ce(de(P(f)("delete_floor")),1)]),_:1})]),_:1})),[[St]])]),_:1})]),_:1})]),_:1},8,["title","rows","columns"]))}}),Da={class:"row"},La={class:"q-my-xl row justify-center"},Wa=yt({setup(e){const{data:l}=Ml(),{data:t}=Bt(),{data:r}=Tl(),o=Il(),n=_t(),{t:u}=Ft(),{notifySaveSuccess:f,notifySaveFailed:c}=$t(),{value:m,errorMessage:i,validate:g,resetField:h}=Pt("name",Rt(Ot.string().nonempty().max(10).refine(_=>t.value?!t.value.some(({name:V})=>V===_):!1)),{validateOnValueUpdate:!1,initialValue:""}),{inputElementRef:C,isEditMode:q,finishEdit:y,startEdit:S}=Gt({onFinishEdit:()=>h({value:""})}),O=d(()=>{var V;let _=0;return(V=l.value)==null||V.forEach(({num_of_room:F})=>_+=F),_}),D=async()=>{!(await g()).valid||o.mutate({name:m.value},{onSuccess:()=>{f(),y()},onError:()=>{c()}})},L=()=>{console.log("Create new room type"),Re.replace({path:"/settings/room-settings/room-types/new",query:n.query,state:{code:null}})},R=(_,V)=>{console.log("Edit room type",_),Re.replace({path:`/settings/room-settings/room-types/${_}`,query:n.query,state:{code:V}})};return(_,V)=>{const F=Bl("router-view");return z(),Ie("div",null,[T(jl,{"model-value":15,"before-class":"q-px-sm","separator-style":"background-color: transparent;"},{before:Q(()=>[T(dt,{separator:"",bordered:""},{default:Q(()=>[xe((z(),W(Pe,{to:"/settings/room-settings",replace:""},{default:Q(()=>[T(te,{class:wt([P(n).query.code?"text-black":"text-primary"])},{default:Q(()=>[ce(de(P(u)("all")),1)]),_:1},8,["class"]),T(te,{side:""},{default:Q(()=>[T(Mt,{label:P(O),rounded:""},null,8,["label"])]),_:1})]),_:1})),[[kt]]),(z(!0),Ie(qt,null,Ct(P(l),({num_of_room:B,code:$,name:j,id:K})=>xe((z(),W(Pe,{key:K,to:`/settings/room-settings?code=${$.replaceAll(" ","_")}`,replace:""},{default:Q(()=>[T(te,null,{default:Q(()=>[T(xt,{class:wt([P(n).query.code===$.replaceAll(" ","_")?"text-primary":"text-black"])},{default:Q(()=>[ce(de($)+" ",1),T(Mt,{label:B,rounded:""},null,8,["label"])]),_:2},1032,["class"]),T(xt,{caption:""},{default:Q(()=>[ce(de(j),1)]),_:2},1024)]),_:2},1024),T(te,{side:""},{default:Q(()=>[T(X,{icon:"edit",flat:"",round:"",onClick:ae(x=>R(K,$),["prevent"])},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["to"])),[[kt]])),128))]),_:1}),pt("div",Da,[T(X,{label:P(u)("new_room_type"),class:"col q-my-md",icon:"add_circle",stretch:"",onClick:L},null,8,["label"])])]),after:Q(()=>[(z(!0),Ie(qt,null,Ct(P(r),({room_floor_name:B,room_floor_id:$,list_rooms:j})=>(z(),W(Qa,{key:$,"floor-name":B,"floor-id":$,rooms:j},null,8,["floor-name","floor-id","rooms"]))),128)),pt("div",La,[P(q)?(z(),W(Vt,{key:0,ref_key:"inputElementRef",ref:C,modelValue:P(m),"onUpdate:modelValue":V[0]||(V[0]=B=>ht(m)?m.value=B:null),"error-message":P(i),error:!!P(i),class:"h-sm",placeholder:P(u)("input_floor_name"),filled:"",onKeydown:[ne(ae(D,["prevent"]),["enter"]),ne(ae(P(y),["prevent"]),["esc"]),ne(ae(P(y),["prevent"]),["tab"])]},null,8,["modelValue","error-message","error","placeholder","onKeydown"])):(z(),W(X,{key:1,label:P(u)("new_floor"),icon:"add_circle",onClick:P(S)},null,8,["label","onClick"]))])]),_:1}),T(F)])}}});export{Wa as default};
