var _l=Object.defineProperty,hl=Object.defineProperties;var Sl=Object.getOwnPropertyDescriptors;var rt=Object.getOwnPropertySymbols;var wl=Object.prototype.hasOwnProperty,ql=Object.prototype.propertyIsEnumerable;var nt=(e,l,t)=>l in e?_l(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,p=(e,l)=>{for(var t in l||(l={}))wl.call(l,t)&&nt(e,t,l[t]);if(rt)for(var t of rt(l))ql.call(l,t)&&nt(e,t,l[t]);return e},L=(e,l)=>hl(e,Sl(l));import{a8 as Z,m as d,ab as s,as as ee,ap as ie,aq as se,l as A,b2 as Cl,a4 as H,aj as Ce,aI as pl,aP as pe,a6 as le,_ as Ne,aH as je,b3 as kl,T as ke,b4 as xl,b5 as it,aK as st,am as ut,a5 as ct,z as dt,a7 as ft,a9 as vt,ai as mt,b6 as Pl,b7 as bt,b8 as Rl,ae as ue,q as X,x as gt,b9 as Ol,ba as Vl,u as R,d as yt,bb as _t,o as I,n as W,w as M,$ as ht,bc as ne,bd as ae,a as $,aM as Fl,D as xe,R as St,E as Pe,G as te,B as ce,C as de,r as Bl,c as Ae,be as wt,F as qt,K as Ct,j as pt,S as kt,A as xt}from"./vendor.c8a9d970.js";import{h as $l,l as El,b as Pt,m as Rt,e as Ot,Q as Vt}from"./index.81cacef1.js";import{a as Ie,Q as U,u as Ft,r as ze}from"./index.46ab63a0.js";import{u as Bt,a as Tl}from"./useRoomsQuery.4a8683d5.js";import{u as $t,a as Ml}from"./useNotify.a169d907.js";import{u as Ql,a as Dl,i as He,b as Et,c as Tt,Q as Ll}from"./QSelect.da68c64f.js";import"./QDialog.d32564a8.js";const Nl=["top","middle","bottom"];var Mt=Z({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Nl.includes(e)}},setup(e,{slots:l}){const t=d(()=>e.align!==void 0?{verticalAlign:e.align}:null),r=d(()=>{const o=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(o!==void 0?` text-${o}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>s("div",{class:r.value,style:t.value,role:"alert","aria-label":e.label},e.label!==void 0?e.label:ee(l.default))}}),jl=Z({name:"QSplitter",props:L(p({},ie),{modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]}),emits:["update:modelValue"],setup(e,{slots:l,emit:t}){const{proxy:{$q:r}}=le(),o=se(e,r),n=A(null),u={before:A(null),after:A(null)},f=d(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(o.value===!0?" q-splitter--dark":"")),c=d(()=>e.horizontal===!0?"height":"width"),m=d(()=>e.reverse!==!0?"before":"after"),i=d(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function b(_){return(e.unit==="%"?_:Math.round(_))+e.unit}const h=d(()=>({[m.value]:{[c.value]:b(e.modelValue)}}));let C,q,y,S,V;function Q(_){if(_.isFirst===!0){const F=n.value.getBoundingClientRect()[c.value];C=e.horizontal===!0?"up":"left",q=e.unit==="%"?100:F,y=Math.min(q,i.value[1],Math.max(i.value[0],e.modelValue)),S=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:r.lang.rtl===!0?-1:1)*(e.unit==="%"?F===0?0:100/F:1),n.value.classList.add("q-splitter--active");return}if(_.isFinal===!0){V!==e.modelValue&&t("update:modelValue",V),n.value.classList.remove("q-splitter--active");return}const x=y+S*(_.direction===C?-1:1)*_.distance[e.horizontal===!0?"y":"x"];V=Math.min(q,i.value[1],Math.max(i.value[0],x)),u[m.value].value.style[c.value]=b(V),e.emitImmediately===!0&&e.modelValue!==V&&t("update:modelValue",V)}const D=d(()=>[[Cl,Q,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function O(_,x){_<x[0]?t("update:modelValue",x[0]):_>x[1]&&t("update:modelValue",x[1])}return H(()=>e.modelValue,_=>{O(_,i.value)}),H(()=>e.limits,()=>{Ce(()=>{O(e.modelValue,i.value)})}),()=>{const _=[s("div",{ref:u.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:h.value.before},ee(l.before)),s("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[pl("div",{class:"q-splitter__separator-area absolute-full"},ee(l.separator),"sep",e.disable!==!0,()=>D.value)]),s("div",{ref:u.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:h.value.after},ee(l.after))];return s("div",{class:f.value,ref:n},pe(l.default,_))}}});const Al=async e=>{const{data:l}=await Ie.post("/rooms/floor/create/",e);return l},Il=()=>{const e=je(),l=r=>{const o=e.getQueryData(U.FLOORS);!o||e.setQueryData(U.FLOORS,()=>[...o,p({},r)])},t=r=>{const o=e.getQueryData(U.ROOMS);!o||e.setQueryData(U.ROOMS,()=>[...o,{room_floor_id:r.id,room_floor_name:r.name,list_rooms:[]}])};return Ne(Al,{onSuccess:r=>{l(r),t(r)}})};var zl=Z({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:l,emit:t}){const r=le(),{proxy:{$q:o}}=r;return()=>{if(e.props===void 0)return s("th",{class:e.autoWidth===!0?"q-table--col-auto-width":""},ee(l.default));let n,u;const f=r.vnode.key;if(f){if(n=e.props.colsMap[f],n===void 0)return}else n=e.props.col;if(n.sortable===!0){const m=n.align==="right"?"unshift":"push";u=kl(l.default,[]),u[m](s(ke,{class:n.__iconClass,name:o.iconSet.table.arrowUp}))}else u=ee(l.default);const c={class:n.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:n.headerStyle,onClick:m=>{n.sortable===!0&&e.props.sort(n),t("click",m)}};return s("th",c,u)}}});const Hl=["horizontal","vertical","cell","none"];var Ul=Z({name:"QMarkupTable",props:L(p({},ie),{dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>Hl.includes(e)}}),setup(e,{slots:l}){const t=le(),r=se(e,t.proxy.$q),o=d(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(r.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>s("div",{class:o.value},[s("table",{class:"q-table"},ee(l.default))])}});function Qt(e,l){return s("div",e,[s("table",{class:"q-table"},l)])}const Kl={list:dt,table:Ul},Wl=["list","table","__qtable"];var Gl=Z({name:"QVirtualScroll",props:L(p({},Ql),{type:{type:String,default:"list",validator:e=>Wl.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}}),setup(e,{slots:l,attrs:t}){let r;const o=A(null),n=d(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:u,localResetVirtualScroll:f,padVirtualScroll:c,onVirtualScrollEvt:m}=Dl({virtualScrollLength:n,getVirtualScrollTarget:q,getVirtualScrollEl:C}),i=d(()=>{if(n.value===0)return[];const Q=(D,O)=>({index:u.value.from+O,item:D});return e.itemsFn===void 0?e.items.slice(u.value.from,u.value.to).map(Q):e.itemsFn(u.value.from,u.value.to-u.value.from).map(Q)}),b=d(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),h=d(()=>e.scrollTarget!==void 0?{}:{tabindex:0});H(n,()=>{f()}),H(()=>e.scrollTarget,()=>{S(),y()});function C(){return o.value.$el||o.value}function q(){return r}function y(){r=xl(C(),e.scrollTarget),r.addEventListener("scroll",m,it.passive)}function S(){r!==void 0&&(r.removeEventListener("scroll",m,it.passive),r=void 0)}function V(){let Q=c(e.type==="list"?"div":"tbody",i.value.map(l.default));return l.before!==void 0&&(Q=l.before().concat(Q)),pe(l.after,Q)}return st(()=>{f()}),ut(()=>{y()}),ct(()=>{S()}),()=>{if(l.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?Qt({ref:o,class:"q-table__middle "+b.value},V()):s(Kl[e.type],p(L(p({},t),{ref:o,class:[t.class,b.value]}),h.value),V)}}});const Yl={xs:2,sm:4,md:6,lg:10,xl:14};function Dt(e,l,t){return{transform:l===!0?`translateX(${t.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var Xl=Z({name:"QLinearProgress",props:L(p(p({},ie),ft),{value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean}),setup(e,{slots:l}){const{proxy:t}=le(),r=se(e,t.$q),o=vt(e,Yl),n=d(()=>e.indeterminate===!0||e.query===!0),u=d(()=>e.reverse!==e.query),f=d(()=>L(p({},o.value!==null?o.value:{}),{"--q-linear-progress-speed":`${e.animationSpeed}ms`})),c=d(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),m=d(()=>Dt(e.buffer!==void 0?e.buffer:1,u.value,t.$q)),i=d(()=>`q-linear-progress__track absolute-full q-linear-progress__track--with${e.instantFeedback===!0?"out":""}-transition q-linear-progress__track--${r.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),b=d(()=>Dt(n.value===!0?1:e.value,u.value,t.$q)),h=d(()=>`q-linear-progress__model absolute-full q-linear-progress__model--with${e.instantFeedback===!0?"out":""}-transition q-linear-progress__model--${n.value===!0?"in":""}determinate`),C=d(()=>({width:`${e.value*100}%`})),q=d(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"}`);return()=>{const y=[s("div",{class:i.value,style:m.value}),s("div",{class:h.value,style:b.value})];return e.stripe===!0&&n.value===!1&&y.push(s("div",{class:q.value,style:C.value})),s("div",{class:c.value,style:f.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},pe(l.default,y))}}});function Jl(e,l){const t=A(null),r=d(()=>e.disable!==!0?null:s("span",{ref:t,class:"no-outline",tabindex:-1}));function o(n){const u=l.value;n!==void 0&&n.type.indexOf("key")===0?u!==null&&document.activeElement!==u&&u.contains(document.activeElement)===!0&&u.focus():t.value!==null&&(n===void 0||u!==null&&u.contains(n.target)===!0)&&t.value.focus()}return{refocusTargetEl:r,refocusTarget:o}}var Zl={xs:30,sm:35,md:40,lg:50,xl:60};const ea=L(p(p(p({},ie),ft),$l),{modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]}),ta=["update:modelValue"];function la(e,l){const{props:t,slots:r,emit:o,proxy:n}=le(),{$q:u}=n,f=se(t,u),c=A(null),{refocusTargetEl:m,refocusTarget:i}=Jl(t,c),b=vt(t,Zl),h=d(()=>t.val!==void 0&&Array.isArray(t.modelValue)),C=d(()=>h.value===!0?t.modelValue.indexOf(t.val):-1),q=d(()=>h.value===!0?C.value>-1:t.modelValue===t.trueValue),y=d(()=>h.value===!0?C.value===-1:t.modelValue===t.falseValue),S=d(()=>q.value===!1&&y.value===!1),V=d(()=>t.disable===!0?-1:t.tabindex||0),Q=d(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(t.disable===!0?" disabled":"")+(f.value===!0?` q-${e}--dark`:"")+(t.dense===!0?` q-${e}--dense`:"")+(t.leftLabel===!0?" reverse":"")),D=d(()=>{const P=q.value===!0?"truthy":y.value===!0?"falsy":"indet",J=t.color!==void 0&&(t.keepColor===!0||(e==="toggle"?q.value===!0:y.value!==!0))?` text-${t.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${P}${J}`}),O=d(()=>{const P={type:"checkbox"};return t.name!==void 0&&Object.assign(P,{"^checked":q.value===!0?"checked":void 0,name:t.name,value:h.value===!0?t.val:t.trueValue}),P}),_=El(O),x=d(()=>{const P={tabindex:V.value,role:"checkbox","aria-label":t.label,"aria-checked":S.value===!0?"mixed":q.value===!0?"true":"false"};return t.disable===!0&&(P["aria-disabled"]="true"),P});function F(P){P!==void 0&&(mt(P),i(P)),t.disable!==!0&&o("update:modelValue",E(),P)}function E(){if(h.value===!0){if(q.value===!0){const P=t.modelValue.slice();return P.splice(C.value,1),P}return t.modelValue.concat([t.val])}if(q.value===!0){if(t.toggleOrder!=="ft"||t.toggleIndeterminate===!1)return t.falseValue}else if(y.value===!0){if(t.toggleOrder==="ft"||t.toggleIndeterminate===!1)return t.trueValue}else return t.toggleOrder!=="ft"?t.trueValue:t.falseValue;return t.indeterminateValue}function z(P){(P.keyCode===13||P.keyCode===32)&&mt(P)}function N(P){(P.keyCode===13||P.keyCode===32)&&F(P)}const K=l(q,S);return Object.assign(n,{toggle:F}),()=>{const P=K();t.disable!==!0&&_(P,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const J=[s("div",{class:D.value,style:b.value},P)];m.value!==null&&J.push(m.value);const me=t.label!==void 0?pe(r.default,[t.label]):ee(r.default);return me!==void 0&&J.push(s("div",{class:`q-${e}__label q-anchor--skip`},me)),s("div",L(p({ref:c,class:Q.value},x.value),{onClick:F,onKeydown:z,onKeyup:N}),J)}}const aa=s("div",{class:"q-checkbox__bg absolute"},[s("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24","aria-hidden":"true"},[s("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),s("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var Ue=Z({name:"QCheckbox",props:ea,emits:ta,setup(){return la("checkbox",()=>()=>[aa])}});let fe=0;const oa={fullscreen:Boolean,noRouteFullscreenExit:Boolean},ra=["update:fullscreen","fullscreen"];function na(){const e=le(),{props:l,emit:t,proxy:r}=e;let o,n,u;const f=A(!1);Pl(e)===!0&&H(()=>r.$route,()=>{l.noRouteFullscreenExit!==!0&&i()}),H(()=>l.fullscreen,b=>{f.value!==b&&c()}),H(f,b=>{t("update:fullscreen",b),t("fullscreen",b)});function c(){f.value===!0?i():m()}function m(){f.value!==!0&&(f.value=!0,u=r.$el.parentNode,u.replaceChild(n,r.$el),document.body.appendChild(r.$el),fe++,fe===1&&document.body.classList.add("q-body--fullscreen-mixin"),o={handler:i},bt.add(o))}function i(){f.value===!0&&(o!==void 0&&(bt.remove(o),o=void 0),u.replaceChild(r.$el,n),f.value=!1,fe=Math.max(0,fe-1),fe===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),r.$el.scrollIntoView!==void 0&&setTimeout(()=>{r.$el.scrollIntoView()})))}return st(()=>{n=document.createElement("span")}),ut(()=>{l.fullscreen===!0&&m()}),ct(i),Object.assign(r,{toggleFullscreen:c,setFullscreen:m,exitFullscreen:i}),{inFullscreen:f,toggleFullscreen:c}}function ia(e,l){return new Date(e)-new Date(l)}const sa={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function ua(e,l,t,r){const o=d(()=>{const{sortBy:f}=l.value;return f&&t.value.find(c=>c.name===f)||null}),n=d(()=>e.sortMethod!==void 0?e.sortMethod:(f,c,m)=>{const i=t.value.find(C=>C.name===c);if(i===void 0||i.field===void 0)return f;const b=m===!0?-1:1,h=typeof i.field=="function"?C=>i.field(C):C=>C[i.field];return f.sort((C,q)=>{let y=h(C),S=h(q);return y==null?-1*b:S==null?1*b:i.sort!==void 0?i.sort(y,S,C,q)*b:He(y)===!0&&He(S)===!0?(y-S)*b:Et(y)===!0&&Et(S)===!0?ia(y,S)*b:typeof y=="boolean"&&typeof S=="boolean"?(y-S)*b:([y,S]=[y,S].map(V=>(V+"").toLocaleString().toLowerCase()),y<S?-1*b:y===S?0:b)})});function u(f){let c=e.columnSortOrder;if(f===Object(f))f.sortOrder&&(c=f.sortOrder),f=f.name;else{const b=t.value.find(h=>h.name===f);b!==void 0&&b.sortOrder&&(c=b.sortOrder)}let{sortBy:m,descending:i}=l.value;m!==f?(m=f,i=c==="da"):e.binaryStateSort===!0?i=!i:i===!0?c==="ad"?m=null:i=!1:c==="ad"?i=!0:m=null,r({sortBy:m,descending:i,page:1})}return{columnToSort:o,computedSortMethod:n,sort:u}}const ca={filter:[String,Object],filterMethod:Function};function da(e,l){const t=d(()=>e.filterMethod!==void 0?e.filterMethod:(r,o,n,u)=>{const f=o?o.toLowerCase():"";return r.filter(c=>n.some(m=>{const i=u(m,c)+"";return(i==="undefined"||i==="null"?"":i.toLowerCase()).indexOf(f)!==-1}))});return H(()=>e.filter,()=>{Ce(()=>{l({page:1},!0)})},{deep:!0}),{computedFilterMethod:t}}function fa(e,l){for(const t in l)if(l[t]!==e[t])return!1;return!0}function Lt(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const va={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function ma(e,l){const{props:t,emit:r}=e,o=A(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:t.rowsPerPageOptions.length>0?t.rowsPerPageOptions[0]:5},t.pagination)),n=d(()=>{const i=t["onUpdate:pagination"]!==void 0?p(p({},o.value),t.pagination):o.value;return Lt(i)}),u=d(()=>n.value.rowsNumber!==void 0);function f(i){c({pagination:i,filter:t.filter})}function c(i={}){Ce(()=>{r("request",{pagination:i.pagination||n.value,filter:i.filter||t.filter,getCellValue:l})})}function m(i,b){const h=Lt(p(p({},n.value),i));if(fa(n.value,h)===!0){u.value===!0&&b===!0&&f(h);return}if(u.value===!0){f(h);return}t.pagination!==void 0&&t["onUpdate:pagination"]!==void 0?r("update:pagination",h):o.value=h}return{innerPagination:o,computedPagination:n,isServerSide:u,requestServerInteraction:c,setPagination:m}}function ba(e,l,t,r,o,n){const{props:u,emit:f,proxy:{$q:c}}=e,m=d(()=>r.value===!0?t.value.rowsNumber||0:n.value),i=d(()=>{const{page:O,rowsPerPage:_}=t.value;return(O-1)*_}),b=d(()=>{const{page:O,rowsPerPage:_}=t.value;return O*_}),h=d(()=>t.value.page===1),C=d(()=>t.value.rowsPerPage===0?1:Math.max(1,Math.ceil(m.value/t.value.rowsPerPage))),q=d(()=>b.value===0?!0:t.value.page>=C.value),y=d(()=>(u.rowsPerPageOptions.includes(l.value.rowsPerPage)?u.rowsPerPageOptions:[l.value.rowsPerPage].concat(u.rowsPerPageOptions)).map(_=>({label:_===0?c.lang.table.allRows:""+_,value:_})));H(C,(O,_)=>{if(O===_)return;const x=t.value.page;O&&!x?o({page:1}):O<x&&o({page:O})});function S(){o({page:1})}function V(){const{page:O}=t.value;O>1&&o({page:O-1})}function Q(){const{page:O,rowsPerPage:_}=t.value;b.value>0&&O*_<m.value&&o({page:O+1})}function D(){o({page:C.value})}return u["onUpdate:pagination"]!==void 0&&f("update:pagination",p({},t.value)),{firstRowIndex:i,lastRowIndex:b,isFirstPage:h,isLastPage:q,pagesNumber:C,computedRowsPerPageOptions:y,computedRowsNumber:m,firstPage:S,prevPage:V,nextPage:Q,lastPage:D}}const ga={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},ya=["update:selected","selection"];function _a(e,l,t,r){const o=d(()=>{const q={};return e.selected.map(r.value).forEach(y=>{q[y]=!0}),q}),n=d(()=>e.selection!=="none"),u=d(()=>e.selection==="single"),f=d(()=>e.selection==="multiple"),c=d(()=>t.value.length>0&&t.value.every(q=>o.value[r.value(q)]===!0)),m=d(()=>c.value!==!0&&t.value.some(q=>o.value[r.value(q)]===!0)),i=d(()=>e.selected.length);function b(q){return o.value[q]===!0}function h(){l("update:selected",[])}function C(q,y,S,V){l("selection",{rows:y,added:S,keys:q,evt:V});const Q=u.value===!0?S===!0?y:[]:S===!0?e.selected.concat(y):e.selected.filter(D=>q.includes(r.value(D))===!1);l("update:selected",Q)}return{hasSelectionMode:n,singleSelection:u,multipleSelection:f,allRowsSelected:c,someRowsSelected:m,rowsSelectedNumber:i,isRowSelected:b,clearSelection:h,updateSelection:C}}function Nt(e){return Array.isArray(e)?e.slice():[]}const ha={expanded:Array},Sa=["update:expanded"];function wa(e,l){const t=A(Nt(e.expanded));H(()=>e.expanded,u=>{t.value=Nt(u)});function r(u){return t.value.includes(u)}function o(u){e.expanded!==void 0?l("update:expanded",u):t.value=u}function n(u,f){const c=t.value.slice(),m=c.indexOf(u);f===!0?m===-1&&(c.push(u),o(c)):m!==-1&&(c.splice(m,1),o(c))}return{isRowExpanded:r,setExpanded:o,updateExpanded:n}}const qa={visibleColumns:Array};function Ca(e,l,t){const r=d(()=>{if(e.columns!==void 0)return e.columns;const f=e.rows[0];return f!==void 0?Object.keys(f).map(c=>({name:c,label:c.toUpperCase(),field:c,align:He(f[c])?"right":"left",sortable:!0})):[]}),o=d(()=>{const{sortBy:f,descending:c}=l.value;return(e.visibleColumns!==void 0?r.value.filter(i=>i.required===!0||e.visibleColumns.includes(i.name)===!0):r.value).map(i=>{const b=i.align||"right",h=`text-${b}`;return L(p({},i),{align:b,__iconClass:`q-table__sort-icon q-table__sort-icon--${b}`,__thClass:h+(i.headerClasses!==void 0?" "+i.headerClasses:"")+(i.sortable===!0?" sortable":"")+(i.name===f?` sorted ${c===!0?"sort-desc":""}`:""),__tdStyle:i.style!==void 0?typeof i.style!="function"?()=>i.style:i.style:()=>null,__tdClass:i.classes!==void 0?typeof i.classes!="function"?()=>h+" "+i.classes:C=>h+" "+i.classes(C):()=>h})})}),n=d(()=>{const f={};return o.value.forEach(c=>{f[c.name]=c}),f}),u=d(()=>e.tableColspan!==void 0?e.tableColspan:o.value.length+(t.value===!0?1:0));return{colList:r,computedCols:o,computedColsMap:n,computedColspan:u}}const Re="q-table__bottom row items-center",jt={};Tt.forEach(e=>{jt[e]={}});var pa=Z({name:"QTable",props:p(p(p(p(p(p(p(p(L(p({rows:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean},jt),{noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function}),ie),oa),qa),ca),va),ha),ga),sa),emits:["request","virtual-scroll",...ra,...Sa,...ya],setup(e,{slots:l,emit:t}){const r=le(),{proxy:{$q:o}}=r,n=se(e,o),{inFullscreen:u,toggleFullscreen:f}=na(),c=d(()=>typeof e.rowKey=="function"?e.rowKey:a=>a[e.rowKey]),m=A(null),i=A(null),b=d(()=>e.grid!==!0&&e.virtualScroll===!0),h=d(()=>" q-table__card"+(n.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),C=d(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.loading===!0?" q-table--loading":"")+(e.grid===!0?" q-table--grid":h.value)+(n.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(u.value===!0?" fullscreen scroll":"")),q=d(()=>C.value+(e.loading===!0?" q-table--loading":""));H(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+C.value,()=>{b.value===!0&&i.value!==null&&i.value.reset()});const{innerPagination:y,computedPagination:S,isServerSide:V,requestServerInteraction:Q,setPagination:D}=ma(r,oe),{computedFilterMethod:O}=da(e,D),{isRowExpanded:_,setExpanded:x,updateExpanded:F}=wa(e,t),E=d(()=>{let a=e.rows;if(V.value===!0||a.length===0)return a;const{sortBy:v,descending:g}=S.value;return e.filter&&(a=O.value(a,e.filter,G.value,oe)),Jt.value!==null&&(a=Zt.value(e.rows===a?a.slice():a,v,g)),a}),z=d(()=>E.value.length),N=d(()=>{let a=E.value;if(V.value===!0)return a;const{rowsPerPage:v}=S.value;return v!==0&&(ge.value===0&&e.rows!==a?a.length>ye.value&&(a=a.slice(0,ye.value)):a=a.slice(ge.value,ye.value)),a}),{hasSelectionMode:K,singleSelection:P,multipleSelection:J,allRowsSelected:me,someRowsSelected:Ye,rowsSelectedNumber:Oe,isRowSelected:Ve,clearSelection:Yt,updateSelection:be}=_a(e,t,N,c),{colList:Xt,computedCols:G,computedColsMap:Xe,computedColspan:Je}=Ca(e,S,K),{columnToSort:Jt,computedSortMethod:Zt,sort:Fe}=ua(e,S,Xt,D),{firstRowIndex:ge,lastRowIndex:ye,isFirstPage:Be,isLastPage:$e,pagesNumber:_e,computedRowsPerPageOptions:el,computedRowsNumber:he,firstPage:Ee,prevPage:Te,nextPage:Me,lastPage:Qe}=ba(r,y,S,V,D,z),tl=d(()=>N.value.length===0),ll=d(()=>{const a={};return Tt.forEach(v=>{a[v]=e[v]}),a.virtualScrollItemSize===void 0&&(a.virtualScrollItemSize=e.dense===!0?28:48),a});function al(){b.value===!0&&i.value.reset()}function ol(){if(e.grid===!0)return gl();const a=e.hideHeader!==!0?at:null;if(b.value===!0){const g=l["top-row"],w=l["bottom-row"],k={default:T=>et(T.item,l.body,T.index)};if(g!==void 0){const T=s("tbody",g({cols:G.value}));k.before=a===null?()=>T:()=>[a()].concat(T)}else a!==null&&(k.before=a);return w!==void 0&&(k.after=()=>s("tbody",w({cols:G.value}))),s(Gl,L(p({ref:i,class:e.tableClass,style:e.tableStyle},ll.value),{items:N.value,type:"__qtable",tableColspan:Je.value,onVirtualScroll:nl}),k)}const v=[il()];return a!==null&&v.unshift(a()),Qt({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},v)}function rl(a,v){if(i.value!==null){i.value.scrollTo(a,v);return}a=parseInt(a,10);const g=m.value.querySelector(`tbody tr:nth-of-type(${a+1})`);if(g!==null){const w=m.value.querySelector(".q-table__middle.scroll"),{offsetTop:k}=g,T=k<w.scrollTop?"decrease":"increase";w.scrollTop=k,t("virtual-scroll",{index:a,from:0,to:y.value.rowsPerPage-1,direction:T})}}function nl(a){t("virtual-scroll",a)}function Ze(){return[s(Xl,{class:"q-table__linear-progress",color:e.color,dark:n.value,indeterminate:!0,trackColor:"transparent"})]}function et(a,v,g){const w=c.value(a),k=Ve(w);if(v!==void 0)return v(tt({key:w,row:a,pageIndex:g,__trClass:k?"selected":""}));const T=l["body-cell"],B=G.value.map(j=>{const we=l[`body-cell-${j.name}`],qe=we!==void 0?we:T;return qe!==void 0?qe(sl({key:w,row:a,pageIndex:g,col:j})):s("td",{class:j.__tdClass(a),style:j.__tdStyle(a)},oe(j,a))});if(K.value===!0){const j=l["body-selection"],we=j!==void 0?j(ul({key:w,row:a,pageIndex:g})):[s(Ue,{modelValue:k,color:e.color,dark:n.value,dense:e.dense,"onUpdate:modelValue":(qe,yl)=>{be([w],[a],qe,yl)}})];B.unshift(s("td",{class:"q-table--col-auto-width"},we))}const Y={key:w,class:{selected:k}};return e.onRowClick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onClick=j=>{t("RowClick",j,a,g)}),e.onRowDblclick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onDblclick=j=>{t("RowDblclick",j,a,g)}),e.onRowContextmenu!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onContextmenu=j=>{t("RowContextmenu",j,a,g)}),s("tr",Y,B)}function il(){const a=l.body,v=l["top-row"],g=l["bottom-row"];let w=N.value.map((k,T)=>et(k,a,T));return v!==void 0&&(w=v({cols:G.value}).concat(w)),g!==void 0&&(w=w.concat(g({cols:G.value}))),s("tbody",w)}function tt(a){return De(a),a.cols=a.cols.map(v=>{const g=p({},v);return ue(g,"value",()=>oe(v,a.row)),g}),a}function sl(a){return De(a),ue(a,"value",()=>oe(a.col,a.row)),a}function ul(a){return De(a),a}function De(a){Object.assign(a,{cols:G.value,colsMap:Xe.value,sort:Fe,rowIndex:ge.value+a.pageIndex,color:e.color,dark:n.value,dense:e.dense}),K.value===!0&&ue(a,"selected",()=>Ve(a.key),(v,g)=>{be([a.key],[a.row],v,g)}),ue(a,"expand",()=>_(a.key),v=>{F(a.key,v)})}function oe(a,v){const g=typeof a.field=="function"?a.field(v):v[a.field];return a.format!==void 0?a.format(g,v):g}const re=d(()=>({pagination:S.value,pagesNumber:_e.value,isFirstPage:Be.value,isLastPage:$e.value,firstPage:Ee,prevPage:Te,nextPage:Me,lastPage:Qe,inFullscreen:u.value,toggleFullscreen:f}));function cl(){const a=l.top,v=l["top-left"],g=l["top-right"],w=l["top-selection"],k=K.value===!0&&w!==void 0&&Oe.value>0,T="q-table__top relative-position row items-center";if(a!==void 0)return s("div",{class:T},[a(re.value)]);let B;if(k===!0?B=w(re.value).slice():(B=[],v!==void 0?B.push(s("div",{class:"q-table-control"},[v(re.value)])):e.title&&B.push(s("div",{class:"q-table__control"},[s("div",{class:["q-table__title",e.titleClass]},e.title)]))),g!==void 0&&(B.push(s("div",{class:"q-table__separator col"})),B.push(s("div",{class:"q-table__control"},[g(re.value)]))),B.length!==0)return s("div",{class:T},B)}const lt=d(()=>Ye.value===!0?null:me.value);function at(){const a=dl();return e.loading===!0&&l.loading===void 0&&a.push(s("tr",{class:"q-table__progress"},[s("th",{class:"relative-position",colspan:Je.value},Ze())])),s("thead",a)}function dl(){const a=l.header,v=l["header-cell"];if(a!==void 0)return a(Le({header:!0})).slice();const g=G.value.map(w=>{const k=l[`header-cell-${w.name}`],T=k!==void 0?k:v,B=Le({col:w});return T!==void 0?T(B):s(zl,{key:w.name,props:B},()=>w.label)});if(P.value===!0&&e.grid!==!0)g.unshift(s("th",{class:"q-table--col-auto-width"}," "));else if(J.value===!0){const w=l["header-selection"],k=w!==void 0?w(Le({})):[s(Ue,{color:e.color,modelValue:lt.value,dark:n.value,dense:e.dense,"onUpdate:modelValue":ot})];g.unshift(s("th",{class:"q-table--col-auto-width"},k))}return[s("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},g)]}function Le(a){return Object.assign(a,{cols:G.value,sort:Fe,colsMap:Xe.value,color:e.color,dark:n.value,dense:e.dense}),J.value===!0&&ue(a,"selected",()=>lt.value,ot),a}function ot(a){Ye.value===!0&&(a=!1),be(N.value.map(c.value),N.value,a)}const Se=d(()=>{const a=[e.iconFirstPage||o.iconSet.table.firstPage,e.iconPrevPage||o.iconSet.table.prevPage,e.iconNextPage||o.iconSet.table.nextPage,e.iconLastPage||o.iconSet.table.lastPage];return o.lang.rtl===!0?a.reverse():a});function fl(){if(e.hideBottom===!0)return;if(tl.value===!0){if(e.hideNoData===!0)return;const g=e.loading===!0?e.loadingLabel||o.lang.table.loading:e.filter?e.noResultsLabel||o.lang.table.noResults:e.noDataLabel||o.lang.table.noData,w=l["no-data"],k=w!==void 0?[w({message:g,icon:o.iconSet.table.warning,filter:e.filter})]:[s(ke,{class:"q-table__bottom-nodata-icon",name:o.iconSet.table.warning}),g];return s("div",{class:Re+" q-table__bottom--nodata"},k)}const a=l.bottom;if(a!==void 0)return s("div",{class:Re},[a(re.value)]);const v=e.hideSelectedBanner!==!0&&K.value===!0&&Oe.value>0?[s("div",{class:"q-table__control"},[s("div",[(e.selectedRowsLabel||o.lang.table.selectedRecords)(Oe.value)])])]:[];if(e.hidePagination!==!0)return s("div",{class:Re+" justify-end"},ml(v));if(v.length>0)return s("div",{class:Re},v)}function vl(a){D({page:1,rowsPerPage:a.value})}function ml(a){let v;const{rowsPerPage:g}=S.value,w=e.paginationLabel||o.lang.table.pagination,k=l.pagination,T=e.rowsPerPageOptions.length>1;if(a.push(s("div",{class:"q-table__separator col"})),T===!0&&a.push(s("div",{class:"q-table__control"},[s("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||o.lang.table.recordsPerPage]),s(Ll,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:g,options:el.value,displayValue:g===0?o.lang.table.allRows:g,dark:n.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":vl})])),k!==void 0)v=k(re.value);else if(v=[s("span",g!==0?{class:"q-table__bottom-item"}:{},[g?w(ge.value+1,Math.min(ye.value,he.value),he.value):w(1,z.value,he.value)])],g!==0&&_e.value>1){const B={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(B.size="sm"),_e.value>2&&v.push(s(X,L(p({key:"pgFirst"},B),{icon:Se.value[0],disable:Be.value,onClick:Ee}))),v.push(s(X,L(p({key:"pgPrev"},B),{icon:Se.value[1],disable:Be.value,onClick:Te})),s(X,L(p({key:"pgNext"},B),{icon:Se.value[2],disable:$e.value,onClick:Me}))),_e.value>2&&v.push(s(X,L(p({key:"pgLast"},B),{icon:Se.value[3],disable:$e.value,onClick:Qe})))}return a.push(s("div",{class:"q-table__control"},v)),a}function bl(){const a=e.gridHeader===!0?[s("table",{class:"q-table"},[at()])]:e.loading===!0&&l.loading===void 0?Ze():void 0;return s("div",{class:"q-table__middle"},a)}function gl(){const a=l.item!==void 0?l.item:v=>{const g=v.cols.map(k=>s("div",{class:"q-table__grid-item-row"},[s("div",{class:"q-table__grid-item-title"},[k.label]),s("div",{class:"q-table__grid-item-value"},[k.value])]));if(K.value===!0){const k=l["body-selection"],T=k!==void 0?k(v):[s(Ue,{modelValue:v.selected,color:e.color,dark:n.value,dense:e.dense,"onUpdate:modelValue":(B,Y)=>{be([v.key],[v.row],B,Y)}})];g.unshift(s("div",{class:"q-table__grid-item-row"},T),s(gt,{dark:n.value}))}const w={class:["q-table__grid-item-card"+h.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(w.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(w.onClick=k=>{t("RowClick",k,v.row,v.pageIndex)}),e.onRowDblclick!==void 0&&(w.onDblclick=k=>{t("RowDblclick",k,v.row,v.pageIndex)})),s("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(v.selected===!0?"q-table__grid-item--selected":"")},[s("div",w,g)])};return s("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},N.value.map((v,g)=>a(tt({key:c.value(v),row:v,pageIndex:g}))))}return Object.assign(r.proxy,{requestServerInteraction:Q,setPagination:D,firstPage:Ee,prevPage:Te,nextPage:Me,lastPage:Qe,isRowSelected:Ve,clearSelection:Yt,isRowExpanded:_,setExpanded:x,sort:Fe,resetVirtualScroll:al,scrollTo:rl,getCellValue:oe}),Rl(r.proxy,{filteredSortedRows:()=>E.value,computedRows:()=>N.value,computedRowsNumber:()=>he.value}),()=>{const a=[cl()],v={ref:m,class:q.value};return e.grid===!0?a.push(bl()):Object.assign(v,{class:[v.class,e.cardClass],style:e.cardStyle}),a.push(ol(),fl()),e.loading===!0&&l.loading!==void 0&&a.push(l.loading()),s("div",v,a)}}});const ka=async({floor_id:e})=>{await Ie.delete(`/rooms/floor/delete/${e}`)},xa=()=>{const e=je(),l=r=>{const o=e.getQueryData(U.FLOORS);!o||e.setQueryData(U.FLOORS,()=>o.filter(n=>n.id!==r.floor_id))},t=r=>{const o=e.getQueryData(U.ROOMS);!o||e.setQueryData(U.ROOMS,()=>o.filter(n=>n.room_floor_id!==r.floor_id))};return Ne(ka,{onSuccess:(r,o)=>{l(o),t(o)}})},Pa=async({floor_id:e,name:l})=>{const{data:t}=await Ie.put(`/rooms/floor/update/${e}`,{name:l});return t},Ra=()=>{const e=je(),l=r=>{const o=e.getQueryData(U.FLOORS);!o||e.setQueryData(U.FLOORS,()=>o.map(n=>n.id!==r.id?n:p({},r)))},t=r=>{const o=e.getQueryData(U.ROOMS);!o||e.setQueryData(U.ROOMS,()=>o.map(n=>n.room_floor_id!==r.id?n:{room_floor_id:r.id,room_floor_name:r.name,list_rooms:n.list_rooms}))};return Ne(Pa,{onSuccess:r=>{l(r),t(r)}})};function Oa(e){return Ol()?(Vl(e),!0):!1}const ve=typeof window!="undefined",Va=e=>typeof e=="string",Ke=()=>{};function At(e){var l;const t=R(e);return(l=t==null?void 0:t.$el)!=null?l:t}const It=ve?window:void 0;ve&&window.document;ve&&window.navigator;ve&&window.location;function zt(...e){let l,t,r,o;if(Va(e[0])?([t,r,o]=e,l=It):[l,t,r,o]=e,!l)return Ke;let n=Ke;const u=H(()=>R(l),c=>{n(),!!c&&(c.addEventListener(t,r,o),n=()=>{c.removeEventListener(t,r,o),n=Ke})},{immediate:!0,flush:"post"}),f=()=>{u(),n()};return Oa(f),f}function Fa(e,l,t={}){const{window:r=It}=t;if(!r)return;const o=A(!0),u=[zt(r,"click",c=>{const m=At(e);!m||m===c.target||c.composedPath().includes(m)||!o.value||l(c)},{passive:!0,capture:!0}),zt(r,"pointerdown",c=>{const m=At(e);o.value=!!m&&!c.composedPath().includes(m)},{passive:!0})];return()=>u.forEach(c=>c())}const We=typeof globalThis=="undefined"?void 0:globalThis,Ge="__vueuse_ssr_handlers__";We[Ge]=We[Ge]||{};We[Ge];var Ht,Ut;ve&&(window==null?void 0:window.navigator)&&((Ht=window==null?void 0:window.navigator)==null?void 0:Ht.platform)&&/iP(ad|hone|od)/.test((Ut=window==null?void 0:window.navigator)==null?void 0:Ut.platform);var Ba=Object.defineProperty,Kt=Object.getOwnPropertySymbols,$a=Object.prototype.hasOwnProperty,Ea=Object.prototype.propertyIsEnumerable,Wt=(e,l,t)=>l in e?Ba(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,Ta=(e,l)=>{for(var t in l||(l={}))$a.call(l,t)&&Wt(e,t,l[t]);if(Kt)for(var t of Kt(l))Ea.call(l,t)&&Wt(e,t,l[t]);return e};const Ma={top:0,left:0,bottom:0,right:0,height:0,width:0};Ta({text:""},Ma);const Gt=e=>{const l=A(!1),t=A(null),r=async()=>{var n;l.value=!0,await Ce(),(n=t.value)==null||n.focus()},o=()=>{l.value=!1,e==null||e.onFinishEdit()};return Fa(t,()=>o()),{inputElementRef:t,isEditMode:l,startEdit:r,finishEdit:o}},Qa=yt({props:{floorName:{type:String,required:!0},floorId:{type:Number,required:!0},rooms:{type:Array,required:!0}},setup(e){const l=e,{data:t}=Bt(),{notifySaveSuccess:r,notifySaveFailed:o,notifyWarning:n}=$t(),u=_t(),{t:f}=Ft(),c=d(()=>{const{code:x}=u.query;return!x||Array.isArray(x)?l.rooms:l.rooms.filter(({room_type_code:F})=>F===x.replaceAll("_"," "))}),{inputElementRef:m,isEditMode:i,startEdit:b,finishEdit:h}=Gt({onFinishEdit:()=>V({value:l.floorName})}),C=Ra(),q=xa(),{value:y,errorMessage:S,resetField:V,validate:Q}=Pt("name",Rt(Ot.string().nonempty().max(10).refine(x=>t.value?!t.value.some(({id:F,name:E})=>F!==l.floorId&&E===x):!1)),{initialValue:l.floorName,validateOnValueUpdate:!1}),D=async x=>{const{valid:F}=await Q();if(!F)return;const{value:E}=x.currentTarget;C.mutate({floor_id:l.floorId,name:E},{onSuccess:()=>{r(),h()},onError:()=>{o()}})},O=()=>{if(l.rooms.length!==0){n(f("please_remove_all_rooms_of_this_floor"));return}q.mutate({floor_id:l.floorId},{onSuccess:()=>{r()},onError:()=>{o()}})},_=()=>{ze.replace({path:"/settings/room-settings/rooms/new",state:{roomName:null,floorId:l.floorId},query:u.query})};return(x,F)=>(I(),W(pa,{grid:"",title:l.floorName,rows:R(c),columns:[{name:"room_type_code",label:"Room Type Code",field:E=>E.room_type_code},{name:"name",label:"Room Name",field:E=>E.name}],"hide-pagination":""},{"top-left":M(()=>[R(i)?(I(),W(Vt,{key:0,ref_key:"inputElementRef",ref:m,modelValue:R(y),"onUpdate:modelValue":F[0]||(F[0]=E=>ht(y)?y.value=E:null),class:"text-h5","error-message":R(S),error:!!R(S),placeholder:R(f)("input_floor_name"),filled:"",dense:"",onKeydown:[ne(ae(D,["prevent"]),["enter"]),ne(ae(R(h),["prevent"]),["esc"]),ne(ae(R(h),["prevent"]),["tab"])]},null,8,["modelValue","error-message","error","placeholder","onKeydown"])):(I(),W(X,{key:1,label:l.floorName,class:"text-h5",padding:"xs 12px","no-caps":"",dense:"",flat:"",onClick:R(b)},null,8,["label","onClick"]))]),"top-right":M(()=>[$(X,{flat:"",round:"",icon:"more_vert"},{default:M(()=>[$(Fl,{anchor:"bottom right",self:"top right"},{default:M(()=>[xe((I(),W(Pe,{clickable:"",onClick:_},{default:M(()=>[$(te,{side:""},{default:M(()=>[$(ke,{name:"add"})]),_:1}),$(te,null,{default:M(()=>[ce(de(R(f)("add_new_room")),1)]),_:1})]),_:1})),[[St]]),$(gt),xe((I(),W(Pe,{clickable:"",onClick:O},{default:M(()=>[$(te,{side:""},{default:M(()=>[$(ke,{name:"delete"})]),_:1}),$(te,null,{default:M(()=>[ce(de(R(f)("delete_floor")),1)]),_:1})]),_:1})),[[St]])]),_:1})]),_:1})]),_:1},8,["title","rows","columns"]))}}),Da={class:"row"},La={class:"q-my-xl row justify-center"},Wa=yt({setup(e){const{data:l}=Ml(),{data:t}=Bt(),{data:r}=Tl(),o=Il(),n=_t(),{t:u}=Ft(),{notifySaveSuccess:f,notifySaveFailed:c}=$t(),{value:m,errorMessage:i,validate:b,resetField:h}=Pt("name",Rt(Ot.string().nonempty().max(10).refine(_=>t.value?!t.value.some(({name:x})=>x===_):!1)),{validateOnValueUpdate:!1,initialValue:""}),{inputElementRef:C,isEditMode:q,finishEdit:y,startEdit:S}=Gt({onFinishEdit:()=>h({value:""})}),V=d(()=>{var x;let _=0;return(x=l.value)==null||x.forEach(({num_of_room:F})=>_+=F),_}),Q=async()=>{!(await b()).valid||o.mutate({name:m.value},{onSuccess:()=>{f(),y()},onError:()=>{c()}})},D=()=>{console.log("Create new room type"),ze.replace({path:"/settings/room-settings/room-types/new",query:n.query,state:{code:null}})},O=(_,x)=>{console.log("Edit room type",_),ze.replace({path:`/settings/room-settings/room-types/${_}`,query:n.query,state:{code:x}})};return(_,x)=>{const F=Bl("router-view");return I(),Ae("div",null,[$(jl,{"model-value":15,"before-class":"q-px-sm","separator-style":"background-color: transparent;"},{before:M(()=>[$(dt,{separator:"",bordered:""},{default:M(()=>[xe((I(),W(Pe,{to:"/settings/room-settings",replace:""},{default:M(()=>[$(te,{class:wt([R(n).query.code?"text-black":"text-primary"])},{default:M(()=>[ce(de(R(u)("all")),1)]),_:1},8,["class"]),$(te,{side:""},{default:M(()=>[$(Mt,{label:R(V),rounded:""},null,8,["label"])]),_:1})]),_:1})),[[kt]]),(I(!0),Ae(qt,null,Ct(R(l),({num_of_room:E,code:z,name:N,id:K})=>xe((I(),W(Pe,{key:K,to:`/settings/room-settings?code=${z.replaceAll(" ","_")}`,replace:""},{default:M(()=>[$(te,null,{default:M(()=>[$(xt,{class:wt([R(n).query.code===z.replaceAll(" ","_")?"text-primary":"text-black"])},{default:M(()=>[ce(de(z)+" ",1),$(Mt,{label:E,rounded:""},null,8,["label"])]),_:2},1032,["class"]),$(xt,{caption:""},{default:M(()=>[ce(de(N),1)]),_:2},1024)]),_:2},1024),$(te,{side:""},{default:M(()=>[$(X,{icon:"edit",flat:"",round:"",onClick:ae(P=>O(K,z),["prevent"])},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["to"])),[[kt]])),128))]),_:1}),pt("div",Da,[$(X,{label:R(u)("new_room_type"),class:"col q-my-md",icon:"add_circle",stretch:"",onClick:D},null,8,["label"])])]),after:M(()=>[(I(!0),Ae(qt,null,Ct(R(r),({room_floor_name:E,room_floor_id:z,list_rooms:N})=>(I(),W(Qa,{key:z,"floor-name":E,"floor-id":z,rooms:N},null,8,["floor-name","floor-id","rooms"]))),128)),pt("div",La,[R(q)?(I(),W(Vt,{key:0,ref_key:"inputElementRef",ref:C,modelValue:R(m),"onUpdate:modelValue":x[0]||(x[0]=E=>ht(m)?m.value=E:null),"error-message":R(i),error:!!R(i),class:"h-sm",placeholder:R(u)("input_floor_name"),filled:"",onKeydown:[ne(ae(Q,["prevent"]),["enter"]),ne(ae(R(y),["prevent"]),["esc"]),ne(ae(R(y),["prevent"]),["tab"])]},null,8,["modelValue","error-message","error","placeholder","onKeydown"])):(I(),W(X,{key:1,label:R(u)("new_floor"),icon:"add_circle",onClick:R(S)},null,8,["label","onClick"]))])]),_:1}),$(F)])}}});export{Wa as default};
