import{T as B,C as k,S as w,c as V}from"./successfully-dialog.100df485.js";import{f as z,r as c,v as P,W as S,l as i,a0 as M,a1 as $,g as I,j,y as h,n as T,a5 as R,E,x as t}from"./vendor.6c1f170c.js";import{a as N,_ as U}from"./index.a42a404f.js";import{d as _}from"./debounce.5c85f6b1.js";import"./useFormat.532d12a0.js";async function F(e){return await N.get("/myBooking/searchMyBooking",{params:e})}var K={"search-booking":"_search-booking_1s43n_1"};const L=z({name:"SearchById",components:{TableBookings:B,CancelDialog:k,SuccessfullyDialog:w},setup(){const e=c(null),n=c(null),{t:r,locale:y}=P(),o=S({loading:!1,cancelDialogVisible:!1,successfullyDialogVisible:!1}),C=c(1),u=c({}),g=c([]),l=S({searchId:"",limit:10,page:1}),f=()=>{o.successfullyDialogVisible=!0},d=a=>{a.typePopup===2?(n.value.setupDialog(a),o.cancelDialogVisible=!0):a.typePopup===1&&p(a.sn)},p=a=>{const v=r("page.myBooking.cancelMessage");R.confirm(`${v}?`,"",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"info"}).then(async()=>{try{const{data:D}=await V({sn:a});D.data&&(E({type:"success",message:r("message.updateSuccess")}),s())}catch{return!1}})},m=_(function(){s()},600),s=async()=>{o.loading=!0;try{const{data:a}=await F(l);g.value=a.data.myBookingList,u.value=a.data.meta}catch{return!1}finally{o.loading=!1}};return{cancelDialogRef:n,successfullyDialogRef:e,myBookings:g,currentPage:C,ui:o,filter:l,pagination:u,t:r,locale:y,showSuccessfullyDialog:f,showCancelDialog:d,handleSearch:m,handleCancelSuccess:()=>{o.successfullyDialogVisible=!0,s()},openCancelConfirm:p,handleCurrentChange:a=>{l.page=Number(a),s()},handleSizeChange:a=>{l.limit=Number(a),s()}}}});function O(e,n,r,y,o,C){const u=i("el-input"),g=i("TableBookings"),l=i("el-pagination"),f=i("CancelDialog"),d=i("SuccessfullyDialog"),p=i("portal-section"),m=M("loading");return $((I(),j(p,{class:T(e.$style["search-booking"])},{header:h(()=>[t(u,{modelValue:e.filter.searchId,"onUpdate:modelValue":n[0]||(n[0]=s=>e.filter.searchId=s),placeholder:e.t("page.myBooking.search"),onInput:e.handleSearch},null,8,["modelValue","placeholder","onInput"])]),footer:h(()=>[t(l,{currentPage:e.currentPage,"onUpdate:currentPage":n[1]||(n[1]=s=>e.currentPage=s),"page-sizes":[10,20,30,40,50],"page-size":e.pagination.perPage?e.pagination.perPage:10,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total?e.pagination.total:0,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"])]),default:h(()=>[t(g,{data:e.myBookings,onShowCancelDialog:e.showCancelDialog,onShowSuccessfullyDialog:e.showSuccessfullyDialog},null,8,["data","onShowCancelDialog","onShowSuccessfullyDialog"]),t(f,{ref:"cancelDialogRef",visible:e.ui.cancelDialogVisible,onClose:n[2]||(n[2]=s=>e.ui.cancelDialogVisible=!1),onCancelSuccess:e.handleCancelSuccess},null,8,["visible","onCancelSuccess"]),t(d,{ref:"successfullyDialogRef",visible:e.ui.successfullyDialogVisible,onClose:n[3]||(n[3]=s=>e.ui.successfullyDialogVisible=!1)},null,8,["visible"])]),_:1},8,["class"])),[[m,e.ui.loading]])}const b={};b.$style=K;var Y=U(L,[["render",O],["__cssModules",b]]);export{Y as default};
