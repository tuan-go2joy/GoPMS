import{f as h,R as V,S as P,T as D,U as k,V as F,u as S,r as _,W as C,i as E,l as d,g as j,h as B,w as r,x as t,X as b,y as a,Y as N,Z as U,n as M,_ as T,C as $}from"./vendor.6c1f170c.js";import{a as K,_ as R,b as W}from"./index.a42a404f.js";import{M as z}from"./index.8f7c376c.js";async function J(e){return await K.post("/partner/signIn",e)}const L=h({name:"SignInPage",components:{ElForm:V,ElFormItem:P,ElCheckbox:D,ElButton:k,ElInput:F},setup(){const e=S(),s=_(!1),i=_("password"),f=_("el-icon-view el-icon-not-view"),l=C({userID:"",password:"",remember:!1}),w=E("emitter"),u=()=>{i.value=i.value==="password"?"":"password",f.value=i.value==="password"?"el-icon-view el-icon-not-view":"el-icon-view"},n=()=>{e.push({name:"ForgotPassword"})},p=(m,o,c)=>{const I=new Date,y={value:o,expiry:I.getTime()+c};localStorage.setItem(m,JSON.stringify(y))};return{typePasswordInput:i,iconPasswordInput:f,loading:s,formData:l,toForgotPassword:n,submitForm:async()=>{s.value=!0;const m={userId:l.userID,password:z.init(l.password),remember:Number(l.remember)};try{const{data:o}=await J(m),c=l.remember?60*60*24*90*1e3:60*60*24*1e3;p("access_token",o.data.accessToken,c),p("profile",o.data.profile,c),await e.push({name:"MyBooking"}),w.emit("login")}catch{return!1}finally{s.value=!1}},showPwd:u}}}),v=e=>(N("data-v-b93251be"),e=e(),U(),e),O={class:"login"},X={class:"login__container"},Y=v(()=>r("div",{class:"login__img"},[r("img",{src:W,alt:"logo-go2joy.png"})],-1)),Z={class:"login__remember"},q=v(()=>r("span",null,"Remember this account",-1)),x=$(" Sign In ");function A(e,s,i,f,l,w){const u=d("el-input"),n=d("el-form-item"),p=d("el-checkbox"),g=d("el-button"),m=d("el-form");return j(),B("div",O,[r("div",X,[Y,t(m,{onSubmit:b(e.submitForm,["prevent"])},{default:a(()=>[t(n,null,{default:a(()=>[t(u,{modelValue:e.formData.userID,"onUpdate:modelValue":s[0]||(s[0]=o=>e.formData.userID=o),placeholder:"User ID"},null,8,["modelValue"])]),_:1}),t(n,null,{default:a(()=>[t(u,{modelValue:e.formData.password,"onUpdate:modelValue":s[2]||(s[2]=o=>e.formData.password=o),placeholder:"Password",type:e.typePasswordInput,onKeyup:T(e.submitForm,["enter"])},{suffix:a(()=>[r("i",{class:M(e.iconPasswordInput),style:{cursor:"pointer"},onClick:s[1]||(s[1]=(...o)=>e.showPwd&&e.showPwd(...o))},null,2)]),_:1},8,["modelValue","type","onKeyup"])]),_:1}),t(n,null,{default:a(()=>[r("div",Z,[t(p,{modelValue:e.formData.remember,"onUpdate:modelValue":s[3]||(s[3]=o=>e.formData.remember=o)},null,8,["modelValue"]),q])]),_:1}),t(n,null,{default:a(()=>[t(g,{class:"login__submit",loading:e.loading,onClick:b(e.submitForm,["prevent"])},{default:a(()=>[x]),_:1},8,["loading","onClick"])]),_:1}),t(n,null,{default:a(()=>[r("div",{class:"login__forgot-password",onClick:s[4]||(s[4]=(...o)=>e.toForgotPassword&&e.toForgotPassword(...o))}," Forgot Password? ")]),_:1})]),_:1},8,["onSubmit"])])])}var ee=R(L,[["render",A],["__scopeId","data-v-b93251be"]]);export{ee as default};
