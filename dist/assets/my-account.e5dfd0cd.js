var xe=Object.defineProperty,Qe=Object.defineProperties;var Fe=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var Y=(e,o,s)=>o in e?xe(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s,C=(e,o)=>{for(var s in o||(o={}))$e.call(o,s)&&Y(e,s,o[s]);if(E)for(var s of E(o))je.call(o,s)&&Y(e,s,o[s]);return e},N=(e,o)=>Qe(e,Fe(o));import{h as K,_ as S,aH as qe,d as _,m as I,o as k,n as T,w as J,u as t,c as B,F as Le,K as Ze,a as r,$ as f,j as w,q as O,l as G,T as P,C as R}from"./vendor.eeb8c9cb.js";import{Q as Xe}from"./QSkeleton.bf4df3d0.js";import{u as ee,t as oe,e as v,a as ae,b as V,Q as x}from"./index.e9c5546a.js";import{Q as te}from"./QSelect.3ba49c3b.js";import{Q as se}from"./QForm.d45826d0.js";import{Q as U,a as W,_ as A,u as M,V as ze}from"./index.79b96d91.js";import"./QDialog.3faf22fe.js";const Je=async()=>{const{data:e}=await W.get("/accounts/me/get");return e},We=()=>K(U.ME,Je),De=async()=>{const{data:e}=await W.get("/accounts/profiles/list-for-selection");return e},Ce=()=>K([U.PROFILES,"selection"],De),Be=async e=>{const{data:o}=await W.put("/accounts/me/update-details",e);return o},Ue=()=>{const e=qe();return S(Be,{onSuccess:o=>{const s=U.ME,a=e.getQueryData(s);!a||e.setQueryData(s,()=>C(C({},a),o))}})};var ne;(function(e){e[e["One star"]=1]="One star",e[e["Two star"]=2]="Two star",e[e["Three star"]=3]="Three star",e[e["Four star"]=4]="Four star",e[e["Five star"]=5]="Five star"})(ne||(ne={}));var re;(function(e){e[e.Hotel=1]="Hotel",e[e.Hostel=2]="Hostel",e[e["Hotel Chains"]=3]="Hotel Chains",e[e["Motel/BnB"]=4]="Motel/BnB",e[e.Apartment=5]="Apartment",e[e["Serviced Apartment"]=6]="Serviced Apartment",e[e.Guesthouse=7]="Guesthouse",e[e.Others=8]="Others"})(re||(re={}));var ie;(function(e){e[e.VND=1]="VND",e[e.USD=2]="USD",e[e.Euro=3]="Euro"})(ie||(ie={}));var ce;(function(e){e[e["Checked In"]=1]="Checked In",e[e["Checked Out"]=2]="Checked Out"})(ce||(ce={}));var le;(function(e){e[e.Active=1]="Active",e[e.Inactive=2]="Inactive"})(le||(le={}));var ue;(function(e){e[e.Created=1]="Created",e[e["No Show"]=2]="No Show",e[e.Canceled=3]="Canceled",e[e["Checked In"]=4]="Checked In",e[e["Checked Out"]=5]="Checked Out",e[e["Undo Checked Out"]=6]="Undo Checked Out",e[e.Overstay=7]="Overstay"})(ue||(ue={}));var de;(function(e){e[e.Created=1]="Created",e[e.Update=2]="Update",e[e["No Show"]=3]="No Show",e[e.Canceled=4]="Canceled",e[e["Checked In"]=5]="Checked In",e[e["Checked Out"]=6]="Checked Out",e[e["Add Product"]=7]="Add Product",e[e["Add Discount"]=8]="Add Discount",e[e["Add Extra"]=9]="Add Extra",e[e["Add Payment"]=10]="Add Payment",e[e["Remove Product"]=11]="Remove Product",e[e["Remove Discount"]=12]="Remove Discount",e[e["Remove Extra"]=13]="Remove Extra",e[e["Remove Payment"]=14]="Remove Payment",e[e["Undo Checked Out"]=15]="Undo Checked Out"})(de||(de={}));var me;(function(e){e[e.Cash=1]="Cash",e[e.Card=2]="Card",e[e.Transfer=3]="Transfer",e[e["OTA Prepaid"]=4]="OTA Prepaid",e[e.Momo=5]="Momo",e[e["Zalo Pay"]=6]="Zalo Pay"})(me||(me={}));var pe;(function(e){e[e["Hotel Discount"]=1]="Hotel Discount",e[e["OTA Discount"]=2]="OTA Discount"})(pe||(pe={}));var ve;(function(e){e[e.Hourly=1]="Hourly",e[e.Daily=2]="Daily",e[e.Overnight=3]="Overnight"})(ve||(ve={}));var H;(function(e){e[e.Male=1]="Male",e[e.Female=2]="Female",e[e.Others=3]="Others"})(H||(H={}));var be;(function(e){e[e.Pending=1]="Pending",e[e.Registered=2]="Registered",e[e.Rejected=3]="Rejected"})(be||(be={}));var ge;(function(e){e[e["Internet Search"]=1]="Internet Search",e[e["Word of Mouth"]=2]="Word of Mouth",e[e.Advertisement=3]="Advertisement",e[e["Sales Man"]=4]="Sales Man",e[e.Others=5]="Others"})(ge||(ge={}));var he;(function(e){e[e.Available=1]="Available",e[e["In use"]=2]="In use",e[e.Maintenance=3]="Maintenance",e[e.Dirty=4]="Dirty",e[e.Lock=5]="Lock"})(he||(he={}));var ye;(function(e){e[e["Social ID"]=1]="Social ID",e[e.Passport=2]="Passport",e[e["Driver license"]=3]="Driver license"})(ye||(ye={}));var ke;(function(e){e[e.Active=1]="Active",e[e.Banned=2]="Banned",e[e.Warning=3]="Warning"})(ke||(ke={}));var fe;(function(e){e[e.Created=1]="Created",e[e.Updated=2]="Updated",e[e.Reserved=3]="Reserved",e[e["Checked In"]=4]="Checked In",e[e["Checked Out"]=5]="Checked Out",e[e.Canceled=6]="Canceled",e[e["No Show"]=7]="No Show"})(fe||(fe={}));var we;(function(e){e[e.settings=1]="settings",e[e.room=2]="room",e[e.inventory=3]="inventory",e[e.guest=4]="guest",e[e.booking=5]="booking",e[e.make_a_reservation=6]="make_a_reservation",e[e.update_room_fee=7]="update_room_fee",e[e.update_booking_source=8]="update_booking_source",e[e.update_add_guest=9]="update_add_guest",e[e.update_remove_guest=10]="update_remove_guest",e[e.update_add_discount=11]="update_add_discount",e[e.update_remove_discount=12]="update_remove_discount",e[e.check_in=13]="check_in",e[e.check_out=14]="check_out",e[e.cancel_booking=15]="cancel_booking",e[e.no_show_booking=16]="no_show_booking",e[e.undo_check_out=17]="undo_check_out",e[e.home=18]="home"})(we||(we={}));const He=async()=>{const{data:e}=await W.get("/common/constants/get"),o={accommodationStarOptions:[],accommodationTypeOptions:[],accommodationCurrencieOptions:[],accommodationPolicyTypeOptions:[],bookingMethodStatusOptions:[],bookingStatusOptions:[],bookingHistoryTypeOptions:[],bookingPaymentMethodOptions:[],bookingDiscountTypeOptions:[],stayTypeOptions:[],genderOptions:[],applicantStatusOptions:[],howToKnowOptions:[],roomStatusOptions:[],documentTypeOptions:[],guestStatusOptions:[],guestHistoryTypeOptions:[],permissionOptions:[]};return e.forEach(s=>{switch(s.module_name){case"accommodation":s.constants.forEach(a=>{switch(a.name){case"AccommStar":o.accommodationStarOptions=[...a.choices];break;case"AccommType":o.accommodationTypeOptions=[...a.choices];break;case"AccommCurrency":o.accommodationCurrencieOptions=[...a.choices];break;case"AccommPolicyType":o.accommodationPolicyTypeOptions=[...a.choices];break;case"BookingMethodStatus":o.bookingMethodStatusOptions=[...a.choices];break}});break;case"booking":s.constants.forEach(a=>{switch(a.name){case"PaymentMethod":o.bookingPaymentMethodOptions=[...a.choices];break;case"DiscountType":o.bookingDiscountTypeOptions=[...a.choices];break;case"HistoryType":o.bookingHistoryTypeOptions=[...a.choices];break;case"Status":o.bookingStatusOptions=[...a.choices];break}});break;case"general":s.constants.forEach(a=>{switch(a.name){case"StayType":o.stayTypeOptions=[...a.choices];break;case"Gender":o.genderOptions=[...a.choices];break}});break;case"guest":s.constants.forEach(a=>{switch(a.name){case"HistoryType":o.guestHistoryTypeOptions=[...a.choices];break;case"DocType":o.documentTypeOptions=[...a.choices];break;case"Status":o.guestStatusOptions=[...a.choices];break}});break;case"permissions":s.constants.forEach(a=>{switch(a.name){case"Module":o.permissionOptions=[...a.choices];break}});break;case"pms_admin":s.constants.forEach(a=>{switch(a.name){case"ApplicantStatus":o.applicantStatusOptions=[...a.choices];break;case"HowToKnow":o.howToKnowOptions=[...a.choices];break}});break;case"room":s.constants.forEach(a=>{switch(a.name){case"RoomStatus":o.roomStatusOptions=[...a.choices];break}});break}}),o},Ke=()=>{const e=K(U.CONSTANTS,He),o=s=>{var a,g,l;return(l=(g=(a=e.data.value)==null?void 0:a.accommodationCurrencieOptions.find(Q=>Q.value===s))==null?void 0:g.name)!=null?l:"USD"};return N(C({},e),{getAccCurrencyName:o})};const _e={key:0,class:"container"},Ge={key:1,class:"container"},Pe={class:"row q-mt-xl"},Re=_({setup(e){const{data:o,isLoading:s}=Ce(),{data:a,isLoading:g}=Ke(),{data:l,isLoading:Q}=We(),h=I(()=>s.value||g.value||Q.value),F=Ue(),{t:i}=M(),$=ee(),j=oe(v.object({name:v.string().nonempty().max(100),mobile:v.string().regex(ze).nonempty(),sex:v.nativeEnum(H)})),D=I(()=>{var L,d,Z,X,z,u;return{name:(d=(L=l.value)==null?void 0:L.name)!=null?d:"",mobile:(X=(Z=l.value)==null?void 0:Z.mobile)!=null?X:"",sex:(u=(z=l.value)==null?void 0:z.sex)!=null?u:H.Others}}),{handleSubmit:y}=ae({validationSchema:j,initialValues:D}),{value:m,errorMessage:b}=V("name"),{value:q,errorMessage:p}=V("mobile"),{value:n,errorMessage:c}=V("sex"),Ve=y(L=>{F.mutate(L,{onSuccess:()=>{$.notify({message:i("saved"),position:"bottom-right",type:"positive",actions:[{label:"Dismiss",color:"white"}]})},onError:()=>{$.notify({message:i("failed_to_save"),position:"bottom-right",type:"negative",actions:[{label:"Dismiss",color:"white"}]})}})});return(L,d)=>(k(),T(se,{onSubmit:t(Ve)},{default:J(()=>{var Z,X,z;return[t(h)?(k(),B("div",_e,[(k(),B(Le,null,Ze(5,u=>r(Xe,{key:u,type:"QInput"})),64))])):(k(),B("div",Ge,[r(x,{modelValue:t(m),"onUpdate:modelValue":d[0]||(d[0]=u=>f(m)?m.value=u:null),label:t(i)("name"),"error-message":t(b),error:!!t(b)},null,8,["modelValue","label","error-message","error"]),r(x,{"model-value":(Z=t(l))==null?void 0:Z.email,label:t(i)("email"),disable:""},null,8,["model-value","label"]),r(x,{modelValue:t(q),"onUpdate:modelValue":d[1]||(d[1]=u=>f(q)?q.value=u:null),label:t(i)("mobile"),"error-message":t(p),error:!!t(p),mask:"### - ### - ####","unmasked-value":""},null,8,["modelValue","label","error-message","error"]),r(te,{modelValue:t(n),"onUpdate:modelValue":d[2]||(d[2]=u=>f(n)?n.value=u:null),label:t(i)("gender"),"error-message":t(c),error:!!t(c),options:(X=t(a))==null?void 0:X.genderOptions,"map-options":"","option-label":"name","emit-value":""},null,8,["modelValue","label","error-message","error","options"]),r(te,{"model-value":(z=t(l))==null?void 0:z.profile.id,label:t(i)("role"),options:t(o),"map-options":"","option-label":"name","option-value":"id","emit-value":"",disable:""},null,8,["model-value","label","options"])])),w("div",Pe,[r(O,{label:t(i)("save"),color:"orange-9",type:"submit",class:"q-ml-auto",loading:t(F).isLoading.value,disable:t(h)},null,8,["label","loading","disable"])])]}),_:1},8,["onSubmit"]))}});var Ae=A(Re,[["__scopeId","data-v-1e9a2bb2"]]);const Me=async e=>{const{data:o}=await W.put("/accounts/me/update-password",e);return o},Ee=()=>S(Me);const Ye={class:"container"},Ne={class:"row q-mt-xl"},Se=_({setup(e){const{t:o}=M(),s=ee(),a=Ee(),g=oe(v.object({current_password:v.string().nonempty(),new_password:v.string().min(6).nonempty(),re_enter_password:v.string().min(6).nonempty()}).refine(p=>p.new_password===p.re_enter_password,{path:["re_enter_password"]})),l={current_password:"",new_password:"",re_enter_password:""},{handleSubmit:Q}=ae({validationSchema:g,initialValues:l}),{value:h,errorMessage:F}=V("current_password"),{value:i,errorMessage:$}=V("new_password"),{value:j,errorMessage:D}=V("re_enter_password"),y=G(!1),m=G(!1),b=G(!1),q=Q(({current_password:p,new_password:n})=>{a.mutate({current_password:p,new_password:n},{onSuccess:()=>{s.notify({message:o("saved"),position:"bottom-right",type:"positive",actions:[{label:"Dismiss",color:"white"}]})},onError:()=>{s.notify({message:o("failed_to_save"),position:"bottom-right",type:"negative",actions:[{label:"Dismiss",color:"white"}]})}})});return(p,n)=>(k(),T(se,{onSubmit:t(q)},{default:J(()=>[w("div",Ye,[r(x,{modelValue:t(h),"onUpdate:modelValue":n[1]||(n[1]=c=>f(h)?h.value=c:null),label:t(o)("current_password"),"error-message":t(F),error:!!t(F),type:y.value?"text":"password"},{append:J(()=>[r(P,{name:y.value?"visibility":"visibility_off",class:"cursor-pointer",onClick:n[0]||(n[0]=c=>y.value=!y.value)},null,8,["name"])]),_:1},8,["modelValue","label","error-message","error","type"]),r(x,{modelValue:t(i),"onUpdate:modelValue":n[3]||(n[3]=c=>f(i)?i.value=c:null),label:t(o)("new_password"),"error-message":t($),error:!!t($),type:b.value?"text":"password"},{append:J(()=>[r(P,{name:b.value?"visibility":"visibility_off",class:"cursor-pointer",onClick:n[2]||(n[2]=c=>b.value=!b.value)},null,8,["name"])]),_:1},8,["modelValue","label","error-message","error","type"]),r(x,{modelValue:t(j),"onUpdate:modelValue":n[5]||(n[5]=c=>f(j)?j.value=c:null),label:t(o)("re-enter_password"),"error-message":t(D),error:!!t(D),type:m.value?"text":"password"},{append:J(()=>[r(P,{name:m.value?"visibility":"visibility_off",class:"cursor-pointer",onClick:n[4]||(n[4]=c=>m.value=!m.value)},null,8,["name"])]),_:1},8,["modelValue","label","error-message","error","type"])]),w("div",Ne,[r(O,{label:t(o)("save"),color:"orange-9",type:"submit",class:"q-ml-auto",loading:t(a).isLoading.value},null,8,["label","loading"])])]),_:1},8,["onSubmit"]))}});var Ie=A(Se,[["__scopeId","data-v-5bd2a6fb"]]);const Te={class:"wrapper"},Oe=_({setup(e){const{t:o}=M();return(s,a)=>(k(),B("div",Te,[w("h4",null,R(t(o)("my_account")),1),w("h6",null,R(t(o)("basic_info")),1),r(Ae),w("h6",null,R(t(o)("change_password")),1),r(Ie)]))}});var co=A(Oe,[["__scopeId","data-v-eb4cea84"]]);export{co as default};
