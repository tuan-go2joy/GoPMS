import{f as b,r as C,u as P,a6 as E,W as w,N as h,l as u,g as $,h as V,w as i,n,x as t,X as D,y as l,E as M,C as B}from"./vendor.6c1f170c.js";import{a as F,_ as S,b as T}from"./index.a42a404f.js";import{M as j}from"./index.8f7c376c.js";async function N(s){return await F.post("/partner/updatePasswordByEmail",s)}var R={"change-password":"_change-password_g8prr_1","change-password__img":"_change-password__img_g8prr_8","change-password__desc":"_change-password__desc_g8prr_16","change-password__title":"_change-password__title_g8prr_20","change-password__container":"_change-password__container_g8prr_27","change-password__submit":"_change-password__submit_g8prr_33","is-disabled":"_is-disabled_g8prr_50"};const z=b({name:"SendCode",components:{},setup(){const s=C(null),r=P(),c=E(),m=w({loading:!1}),_=h(()=>c.getters["forgotPassword/email"]),f=h(()=>c.getters["forgotPassword/verifyCode"]);(!_.value||!f.value)&&r.push({name:"Login"});const a=w({password:"",confirmPassword:""});return{sendCodeRef:s,ui:m,formData:a,rules:{password:[{required:!0,message:"Password must be 6~16 characters of English, numbers.",trigger:"blur"},{min:6,max:16,message:"Password must be 6~16 characters of English, numbers.",trigger:"blur"},{trigger:"blur",validator:(d,e,o)=>{const v=/^([a-zA-Z0-9]+){6,7}$/;setTimeout(()=>{v.test(e)?o():o(new Error("Password must be 6~16 characters of English, numbers."))},100)}}],confirmPassword:{trigger:"blur",validator:(d,e,o)=>{e===""?o(new Error("The password confirmation does not match")):e!==a.password?o(new Error("The password confirmation does not match")):!e&&a.password?o(new Error("The password confirmation does not match")):o()}}},submitForm:()=>{s.value.validate(async d=>{if(!d)return!1;m.loading=!0;try{const e={newPassword:j.init(a.password),email:_.value,verifyCode:f.value},{data:o}=await N(e);o.data&&(M({type:"success",message:"You've changed your password successfully"}),r.push({name:"Login"}))}catch{return!1}finally{m.loading=!1}})}}}}),L=i("img",{src:T,alt:"logo-go2joy.png"},null,-1),U=[L],q=B(" Confirm ");function A(s,r,c,m,_,f){const a=u("el-input"),p=u("el-form-item"),g=u("el-button"),d=u("el-form");return $(),V("div",{class:n(s.$style["change-password"])},[i("div",{class:n(s.$style["change-password__container"])},[i("div",{class:n(s.$style["change-password__img"])},U,2),i("div",{class:n(s.$style["change-password__title"])}," Forgot Password ",2),i("div",{class:n(s.$style["change-password__desc"])}," Set up your new password ",2),t(d,{ref:"sendCodeRef",model:s.formData,rules:s.rules,onSubmit:D(s.submitForm,["prevent"])},{default:l(()=>[t(p,{prop:"password"},{default:l(()=>[t(a,{modelValue:s.formData.password,"onUpdate:modelValue":r[0]||(r[0]=e=>s.formData.password=e),placeholder:"Password",type:"password"},null,8,["modelValue"])]),_:1}),t(p,{prop:"confirmPassword"},{default:l(()=>[t(a,{modelValue:s.formData.confirmPassword,"onUpdate:modelValue":r[1]||(r[1]=e=>s.formData.confirmPassword=e),placeholder:"Confirm password",type:"password"},null,8,["modelValue"])]),_:1}),t(p,null,{default:l(()=>[t(g,{class:n(s.$style["change-password__submit"]),type:"warning",loading:s.ui.loading,onClick:s.submitForm},{default:l(()=>[q]),_:1},8,["class","loading","onClick"])]),_:1})]),_:1},8,["model","rules","onSubmit"])],2)],2)}const y={};y.$style=R;var Y=S(z,[["render",A],["__cssModules",y]]);export{Y as default};
