var _l=Object.defineProperty,hl=Object.defineProperties;var Sl=Object.getOwnPropertyDescriptors;var rt=Object.getOwnPropertySymbols;var wl=Object.prototype.hasOwnProperty,ql=Object.prototype.propertyIsEnumerable;var it=(e,l,t)=>l in e?_l(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,p=(e,l)=>{for(var t in l||(l={}))wl.call(l,t)&&it(e,t,l[t]);if(rt)for(var t of rt(l))ql.call(l,t)&&it(e,t,l[t]);return e},L=(e,l)=>hl(e,Sl(l));import{a8 as Z,m as c,ab as s,as as ee,ap as ie,aq as se,l as A,b2 as Cl,a4 as H,aj as pe,aI as pl,aP as ke,a6 as le,_ as Ne,aH as je,b3 as kl,T as ue,b4 as xl,b5 as st,aK as ut,am as ct,a5 as dt,z as ft,a7 as vt,a9 as mt,ai as gt,b6 as Pl,b7 as bt,b8 as Rl,ae as ce,q as X,x as yt,b9 as Ol,ba as Vl,u as R,d as _t,bb as ht,o as I,n as W,w as M,$ as St,bc as re,bd as ae,a as $,aM as Fl,D as xe,R as wt,E as Pe,G as te,B as de,C as fe,r as Bl,c as Ae,be as qt,F as Ct,K as pt,j as kt,S as xt,A as Pt}from"./vendor.eeb8c9cb.js";import{h as $l,l as El,b as Rt,m as Ot,e as Vt,Q as Ft}from"./index.e9c5546a.js";import{a as Ie,Q as U,u as Bt,r as ze}from"./index.79b96d91.js";import{u as $t,a as Tl}from"./useRoomsQuery.02554421.js";import{u as Et,a as Ml}from"./useNotify.283984e3.js";import{u as Ql,a as Dl,i as He,b as Tt,c as Mt,Q as Ll}from"./QSelect.3ba49c3b.js";import"./QDialog.3faf22fe.js";const Nl=["top","middle","bottom"];var Qt=Z({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Nl.includes(e)}},setup(e,{slots:l}){const t=c(()=>e.align!==void 0?{verticalAlign:e.align}:null),n=c(()=>{const o=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(o!==void 0?` text-${o}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>s("div",{class:n.value,style:t.value,role:"alert","aria-label":e.label},e.label!==void 0?e.label:ee(l.default))}}),jl=Z({name:"QSplitter",props:L(p({},ie),{modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]}),emits:["update:modelValue"],setup(e,{slots:l,emit:t}){const{proxy:{$q:n}}=le(),o=se(e,n),r=A(null),u={before:A(null),after:A(null)},d=c(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(o.value===!0?" q-splitter--dark":"")),f=c(()=>e.horizontal===!0?"height":"width"),m=c(()=>e.reverse!==!0?"before":"after"),i=c(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function g(h){return(e.unit==="%"?h:Math.round(h))+e.unit}const _=c(()=>({[m.value]:{[f.value]:g(e.modelValue)}}));let w,C,y,S,V;function Q(h){if(h.isFirst===!0){const F=r.value.getBoundingClientRect()[f.value];w=e.horizontal===!0?"up":"left",C=e.unit==="%"?100:F,y=Math.min(C,i.value[1],Math.max(i.value[0],e.modelValue)),S=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:n.lang.rtl===!0?-1:1)*(e.unit==="%"?F===0?0:100/F:1),r.value.classList.add("q-splitter--active");return}if(h.isFinal===!0){V!==e.modelValue&&t("update:modelValue",V),r.value.classList.remove("q-splitter--active");return}const x=y+S*(h.direction===w?-1:1)*h.distance[e.horizontal===!0?"y":"x"];V=Math.min(C,i.value[1],Math.max(i.value[0],x)),u[m.value].value.style[f.value]=g(V),e.emitImmediately===!0&&e.modelValue!==V&&t("update:modelValue",V)}const D=c(()=>[[Cl,Q,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function O(h,x){h<x[0]?t("update:modelValue",x[0]):h>x[1]&&t("update:modelValue",x[1])}return H(()=>e.modelValue,h=>{O(h,i.value)}),H(()=>e.limits,()=>{pe(()=>{O(e.modelValue,i.value)})}),()=>{const h=[s("div",{ref:u.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:_.value.before},ee(l.before)),s("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[pl("div",{class:"q-splitter__separator-area absolute-full"},ee(l.separator),"sep",e.disable!==!0,()=>D.value)]),s("div",{ref:u.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:_.value.after},ee(l.after))];return s("div",{class:d.value,ref:r},ke(l.default,h))}}});const Al=async e=>{const{data:l}=await Ie.post("/rooms/floor/create/",e);return l},Il=()=>{const e=je(),l=n=>{const o=e.getQueryData(U.FLOORS);!o||e.setQueryData(U.FLOORS,()=>[...o,p({},n)])},t=n=>{const o=e.getQueryData(U.ROOMS);!o||e.setQueryData(U.ROOMS,()=>[...o,{room_floor_id:n.id,room_floor_name:n.name,list_rooms:[]}])};return Ne(Al,{onSuccess:n=>{l(n),t(n)}})};var zl=Z({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:l,emit:t}){const n=le(),{proxy:{$q:o}}=n;return()=>{if(e.props===void 0)return s("th",{class:e.autoWidth===!0?"q-table--col-auto-width":""},ee(l.default));let r,u;const d=n.vnode.key;if(d){if(r=e.props.colsMap[d],r===void 0)return}else r=e.props.col;if(r.sortable===!0){const m=r.align==="right"?"unshift":"push";u=kl(l.default,[]),u[m](s(ue,{class:r.__iconClass,name:o.iconSet.table.arrowUp}))}else u=ee(l.default);const f={class:r.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:r.headerStyle,onClick:m=>{r.sortable===!0&&e.props.sort(r),t("click",m)}};return s("th",f,u)}}});const Hl=["horizontal","vertical","cell","none"];var Ul=Z({name:"QMarkupTable",props:L(p({},ie),{dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>Hl.includes(e)}}),setup(e,{slots:l}){const t=le(),n=se(e,t.proxy.$q),o=c(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(n.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>s("div",{class:o.value},[s("table",{class:"q-table"},ee(l.default))])}});function Dt(e,l){return s("div",e,[s("table",{class:"q-table"},l)])}const Kl={list:ft,table:Ul},Wl=["list","table","__qtable"];var Gl=Z({name:"QVirtualScroll",props:L(p({},Ql),{type:{type:String,default:"list",validator:e=>Wl.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}}),setup(e,{slots:l,attrs:t}){let n;const o=A(null),r=c(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:u,localResetVirtualScroll:d,padVirtualScroll:f,onVirtualScrollEvt:m}=Dl({virtualScrollLength:r,getVirtualScrollTarget:C,getVirtualScrollEl:w}),i=c(()=>{if(r.value===0)return[];const Q=(D,O)=>({index:u.value.from+O,item:D});return e.itemsFn===void 0?e.items.slice(u.value.from,u.value.to).map(Q):e.itemsFn(u.value.from,u.value.to-u.value.from).map(Q)}),g=c(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),_=c(()=>e.scrollTarget!==void 0?{}:{tabindex:0});H(r,()=>{d()}),H(()=>e.scrollTarget,()=>{S(),y()});function w(){return o.value.$el||o.value}function C(){return n}function y(){n=xl(w(),e.scrollTarget),n.addEventListener("scroll",m,st.passive)}function S(){n!==void 0&&(n.removeEventListener("scroll",m,st.passive),n=void 0)}function V(){let Q=f(e.type==="list"?"div":"tbody",i.value.map(l.default));return l.before!==void 0&&(Q=l.before().concat(Q)),ke(l.after,Q)}return ut(()=>{d()}),ct(()=>{y()}),dt(()=>{S()}),()=>{if(l.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?Dt({ref:o,class:"q-table__middle "+g.value},V()):s(Kl[e.type],p(L(p({},t),{ref:o,class:[t.class,g.value]}),_.value),V)}}});const Yl={xs:2,sm:4,md:6,lg:10,xl:14};function Lt(e,l,t){return{transform:l===!0?`translateX(${t.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var Xl=Z({name:"QLinearProgress",props:L(p(p({},ie),vt),{value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean}),setup(e,{slots:l}){const{proxy:t}=le(),n=se(e,t.$q),o=mt(e,Yl),r=c(()=>e.indeterminate===!0||e.query===!0),u=c(()=>e.reverse!==e.query),d=c(()=>L(p({},o.value!==null?o.value:{}),{"--q-linear-progress-speed":`${e.animationSpeed}ms`})),f=c(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),m=c(()=>Lt(e.buffer!==void 0?e.buffer:1,u.value,t.$q)),i=c(()=>`q-linear-progress__track absolute-full q-linear-progress__track--with${e.instantFeedback===!0?"out":""}-transition q-linear-progress__track--${n.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),g=c(()=>Lt(r.value===!0?1:e.value,u.value,t.$q)),_=c(()=>`q-linear-progress__model absolute-full q-linear-progress__model--with${e.instantFeedback===!0?"out":""}-transition q-linear-progress__model--${r.value===!0?"in":""}determinate`),w=c(()=>({width:`${e.value*100}%`})),C=c(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"}`);return()=>{const y=[s("div",{class:i.value,style:m.value}),s("div",{class:_.value,style:g.value})];return e.stripe===!0&&r.value===!1&&y.push(s("div",{class:C.value,style:w.value})),s("div",{class:f.value,style:d.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},ke(l.default,y))}}});function Jl(e,l){const t=A(null),n=c(()=>e.disable!==!0?null:s("span",{ref:t,class:"no-outline",tabindex:-1}));function o(r){const u=l.value;r!==void 0&&r.type.indexOf("key")===0?u!==null&&document.activeElement!==u&&u.contains(document.activeElement)===!0&&u.focus():t.value!==null&&(r===void 0||u!==null&&u.contains(r.target)===!0)&&t.value.focus()}return{refocusTargetEl:n,refocusTarget:o}}var Zl={xs:30,sm:35,md:40,lg:50,xl:60};const ea=L(p(p(p({},ie),vt),$l),{modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]}),ta=["update:modelValue"];function la(e,l){const{props:t,slots:n,emit:o,proxy:r}=le(),{$q:u}=r,d=se(t,u),f=A(null),{refocusTargetEl:m,refocusTarget:i}=Jl(t,f),g=mt(t,Zl),_=c(()=>t.val!==void 0&&Array.isArray(t.modelValue)),w=c(()=>_.value===!0?t.modelValue.indexOf(t.val):-1),C=c(()=>_.value===!0?w.value>-1:t.modelValue===t.trueValue),y=c(()=>_.value===!0?w.value===-1:t.modelValue===t.falseValue),S=c(()=>C.value===!1&&y.value===!1),V=c(()=>t.disable===!0?-1:t.tabindex||0),Q=c(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(t.disable===!0?" disabled":"")+(d.value===!0?` q-${e}--dark`:"")+(t.dense===!0?` q-${e}--dense`:"")+(t.leftLabel===!0?" reverse":"")),D=c(()=>{const P=C.value===!0?"truthy":y.value===!0?"falsy":"indet",J=t.color!==void 0&&(t.keepColor===!0||(e==="toggle"?C.value===!0:y.value!==!0))?` text-${t.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${P}${J}`}),O=c(()=>{const P={type:"checkbox"};return t.name!==void 0&&Object.assign(P,{"^checked":C.value===!0?"checked":void 0,name:t.name,value:_.value===!0?t.val:t.trueValue}),P}),h=El(O),x=c(()=>{const P={tabindex:V.value,role:"checkbox","aria-label":t.label,"aria-checked":S.value===!0?"mixed":C.value===!0?"true":"false"};return t.disable===!0&&(P["aria-disabled"]="true"),P});function F(P){P!==void 0&&(gt(P),i(P)),t.disable!==!0&&o("update:modelValue",E(),P)}function E(){if(_.value===!0){if(C.value===!0){const P=t.modelValue.slice();return P.splice(w.value,1),P}return t.modelValue.concat([t.val])}if(C.value===!0){if(t.toggleOrder!=="ft"||t.toggleIndeterminate===!1)return t.falseValue}else if(y.value===!0){if(t.toggleOrder==="ft"||t.toggleIndeterminate===!1)return t.trueValue}else return t.toggleOrder!=="ft"?t.trueValue:t.falseValue;return t.indeterminateValue}function z(P){(P.keyCode===13||P.keyCode===32)&&gt(P)}function N(P){(P.keyCode===13||P.keyCode===32)&&F(P)}const K=l(C,S);return Object.assign(r,{toggle:F}),()=>{const P=K();t.disable!==!0&&h(P,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const J=[s("div",{class:D.value,style:g.value},P)];m.value!==null&&J.push(m.value);const ge=t.label!==void 0?ke(n.default,[t.label]):ee(n.default);return ge!==void 0&&J.push(s("div",{class:`q-${e}__label q-anchor--skip`},ge)),s("div",L(p({ref:f,class:Q.value},x.value),{onClick:F,onKeydown:z,onKeyup:N}),J)}}const aa=s("div",{key:"svg",class:"q-checkbox__bg absolute"},[s("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24","aria-hidden":"true"},[s("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),s("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var Ue=Z({name:"QCheckbox",props:ea,emits:ta,setup(e){function l(t,n){const o=c(()=>(t.value===!0?e.checkedIcon:n.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>o.value!==null?[s("div",{key:"icon",class:"q-checkbox__icon-container absolute flex flex-center no-wrap"},[s(ue,{class:"q-checkbox__icon",name:o.value})])]:[aa]}return la("checkbox",l)}});let ve=0;const oa={fullscreen:Boolean,noRouteFullscreenExit:Boolean},na=["update:fullscreen","fullscreen"];function ra(){const e=le(),{props:l,emit:t,proxy:n}=e;let o,r,u;const d=A(!1);Pl(e)===!0&&H(()=>n.$route.fullPath,()=>{l.noRouteFullscreenExit!==!0&&i()}),H(()=>l.fullscreen,g=>{d.value!==g&&f()}),H(d,g=>{t("update:fullscreen",g),t("fullscreen",g)});function f(){d.value===!0?i():m()}function m(){d.value!==!0&&(d.value=!0,u=n.$el.parentNode,u.replaceChild(r,n.$el),document.body.appendChild(n.$el),ve++,ve===1&&document.body.classList.add("q-body--fullscreen-mixin"),o={handler:i},bt.add(o))}function i(){d.value===!0&&(o!==void 0&&(bt.remove(o),o=void 0),u.replaceChild(n.$el,r),d.value=!1,ve=Math.max(0,ve-1),ve===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),n.$el.scrollIntoView!==void 0&&setTimeout(()=>{n.$el.scrollIntoView()})))}return ut(()=>{r=document.createElement("span")}),ct(()=>{l.fullscreen===!0&&m()}),dt(i),Object.assign(n,{toggleFullscreen:f,setFullscreen:m,exitFullscreen:i}),{inFullscreen:d,toggleFullscreen:f}}function ia(e,l){return new Date(e)-new Date(l)}const sa={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function ua(e,l,t,n){const o=c(()=>{const{sortBy:d}=l.value;return d&&t.value.find(f=>f.name===d)||null}),r=c(()=>e.sortMethod!==void 0?e.sortMethod:(d,f,m)=>{const i=t.value.find(w=>w.name===f);if(i===void 0||i.field===void 0)return d;const g=m===!0?-1:1,_=typeof i.field=="function"?w=>i.field(w):w=>w[i.field];return d.sort((w,C)=>{let y=_(w),S=_(C);return y==null?-1*g:S==null?1*g:i.sort!==void 0?i.sort(y,S,w,C)*g:He(y)===!0&&He(S)===!0?(y-S)*g:Tt(y)===!0&&Tt(S)===!0?ia(y,S)*g:typeof y=="boolean"&&typeof S=="boolean"?(y-S)*g:([y,S]=[y,S].map(V=>(V+"").toLocaleString().toLowerCase()),y<S?-1*g:y===S?0:g)})});function u(d){let f=e.columnSortOrder;if(d===Object(d))d.sortOrder&&(f=d.sortOrder),d=d.name;else{const g=t.value.find(_=>_.name===d);g!==void 0&&g.sortOrder&&(f=g.sortOrder)}let{sortBy:m,descending:i}=l.value;m!==d?(m=d,i=f==="da"):e.binaryStateSort===!0?i=!i:i===!0?f==="ad"?m=null:i=!1:f==="ad"?i=!0:m=null,n({sortBy:m,descending:i,page:1})}return{columnToSort:o,computedSortMethod:r,sort:u}}const ca={filter:[String,Object],filterMethod:Function};function da(e,l){const t=c(()=>e.filterMethod!==void 0?e.filterMethod:(n,o,r,u)=>{const d=o?o.toLowerCase():"";return n.filter(f=>r.some(m=>{const i=u(m,f)+"";return(i==="undefined"||i==="null"?"":i.toLowerCase()).indexOf(d)!==-1}))});return H(()=>e.filter,()=>{pe(()=>{l({page:1},!0)})},{deep:!0}),{computedFilterMethod:t}}function fa(e,l){for(const t in l)if(l[t]!==e[t])return!1;return!0}function Nt(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const va={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function ma(e,l){const{props:t,emit:n}=e,o=A(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:t.rowsPerPageOptions.length>0?t.rowsPerPageOptions[0]:5},t.pagination)),r=c(()=>{const i=t["onUpdate:pagination"]!==void 0?p(p({},o.value),t.pagination):o.value;return Nt(i)}),u=c(()=>r.value.rowsNumber!==void 0);function d(i){f({pagination:i,filter:t.filter})}function f(i={}){pe(()=>{n("request",{pagination:i.pagination||r.value,filter:i.filter||t.filter,getCellValue:l})})}function m(i,g){const _=Nt(p(p({},r.value),i));if(fa(r.value,_)===!0){u.value===!0&&g===!0&&d(_);return}if(u.value===!0){d(_);return}t.pagination!==void 0&&t["onUpdate:pagination"]!==void 0?n("update:pagination",_):o.value=_}return{innerPagination:o,computedPagination:r,isServerSide:u,requestServerInteraction:f,setPagination:m}}function ga(e,l,t,n,o,r){const{props:u,emit:d,proxy:{$q:f}}=e,m=c(()=>n.value===!0?t.value.rowsNumber||0:r.value),i=c(()=>{const{page:O,rowsPerPage:h}=t.value;return(O-1)*h}),g=c(()=>{const{page:O,rowsPerPage:h}=t.value;return O*h}),_=c(()=>t.value.page===1),w=c(()=>t.value.rowsPerPage===0?1:Math.max(1,Math.ceil(m.value/t.value.rowsPerPage))),C=c(()=>g.value===0?!0:t.value.page>=w.value),y=c(()=>(u.rowsPerPageOptions.includes(l.value.rowsPerPage)?u.rowsPerPageOptions:[l.value.rowsPerPage].concat(u.rowsPerPageOptions)).map(h=>({label:h===0?f.lang.table.allRows:""+h,value:h})));H(w,(O,h)=>{if(O===h)return;const x=t.value.page;O&&!x?o({page:1}):O<x&&o({page:O})});function S(){o({page:1})}function V(){const{page:O}=t.value;O>1&&o({page:O-1})}function Q(){const{page:O,rowsPerPage:h}=t.value;g.value>0&&O*h<m.value&&o({page:O+1})}function D(){o({page:w.value})}return u["onUpdate:pagination"]!==void 0&&d("update:pagination",p({},t.value)),{firstRowIndex:i,lastRowIndex:g,isFirstPage:_,isLastPage:C,pagesNumber:w,computedRowsPerPageOptions:y,computedRowsNumber:m,firstPage:S,prevPage:V,nextPage:Q,lastPage:D}}const ba={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},ya=["update:selected","selection"];function _a(e,l,t,n){const o=c(()=>{const C={};return e.selected.map(n.value).forEach(y=>{C[y]=!0}),C}),r=c(()=>e.selection!=="none"),u=c(()=>e.selection==="single"),d=c(()=>e.selection==="multiple"),f=c(()=>t.value.length>0&&t.value.every(C=>o.value[n.value(C)]===!0)),m=c(()=>f.value!==!0&&t.value.some(C=>o.value[n.value(C)]===!0)),i=c(()=>e.selected.length);function g(C){return o.value[C]===!0}function _(){l("update:selected",[])}function w(C,y,S,V){l("selection",{rows:y,added:S,keys:C,evt:V});const Q=u.value===!0?S===!0?y:[]:S===!0?e.selected.concat(y):e.selected.filter(D=>C.includes(n.value(D))===!1);l("update:selected",Q)}return{hasSelectionMode:r,singleSelection:u,multipleSelection:d,allRowsSelected:f,someRowsSelected:m,rowsSelectedNumber:i,isRowSelected:g,clearSelection:_,updateSelection:w}}function jt(e){return Array.isArray(e)?e.slice():[]}const ha={expanded:Array},Sa=["update:expanded"];function wa(e,l){const t=A(jt(e.expanded));H(()=>e.expanded,u=>{t.value=jt(u)});function n(u){return t.value.includes(u)}function o(u){e.expanded!==void 0?l("update:expanded",u):t.value=u}function r(u,d){const f=t.value.slice(),m=f.indexOf(u);d===!0?m===-1&&(f.push(u),o(f)):m!==-1&&(f.splice(m,1),o(f))}return{isRowExpanded:n,setExpanded:o,updateExpanded:r}}const qa={visibleColumns:Array};function Ca(e,l,t){const n=c(()=>{if(e.columns!==void 0)return e.columns;const d=e.rows[0];return d!==void 0?Object.keys(d).map(f=>({name:f,label:f.toUpperCase(),field:f,align:He(d[f])?"right":"left",sortable:!0})):[]}),o=c(()=>{const{sortBy:d,descending:f}=l.value;return(e.visibleColumns!==void 0?n.value.filter(i=>i.required===!0||e.visibleColumns.includes(i.name)===!0):n.value).map(i=>{const g=i.align||"right",_=`text-${g}`;return L(p({},i),{align:g,__iconClass:`q-table__sort-icon q-table__sort-icon--${g}`,__thClass:_+(i.headerClasses!==void 0?" "+i.headerClasses:"")+(i.sortable===!0?" sortable":"")+(i.name===d?` sorted ${f===!0?"sort-desc":""}`:""),__tdStyle:i.style!==void 0?typeof i.style!="function"?()=>i.style:i.style:()=>null,__tdClass:i.classes!==void 0?typeof i.classes!="function"?()=>_+" "+i.classes:w=>_+" "+i.classes(w):()=>_})})}),r=c(()=>{const d={};return o.value.forEach(f=>{d[f.name]=f}),d}),u=c(()=>e.tableColspan!==void 0?e.tableColspan:o.value.length+(t.value===!0?1:0));return{colList:n,computedCols:o,computedColsMap:r,computedColspan:u}}const Re="q-table__bottom row items-center",At={};Mt.forEach(e=>{At[e]={}});var pa=Z({name:"QTable",props:p(p(p(p(p(p(p(p(L(p({rows:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean},At),{noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function}),ie),oa),qa),ca),va),ha),ba),sa),emits:["request","virtual-scroll",...na,...Sa,...ya],setup(e,{slots:l,emit:t}){const n=le(),{proxy:{$q:o}}=n,r=se(e,o),{inFullscreen:u,toggleFullscreen:d}=ra(),f=c(()=>typeof e.rowKey=="function"?e.rowKey:a=>a[e.rowKey]),m=A(null),i=A(null),g=c(()=>e.grid!==!0&&e.virtualScroll===!0),_=c(()=>" q-table__card"+(r.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),w=c(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.loading===!0?" q-table--loading":"")+(e.grid===!0?" q-table--grid":_.value)+(r.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(u.value===!0?" fullscreen scroll":"")),C=c(()=>w.value+(e.loading===!0?" q-table--loading":""));H(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+w.value,()=>{g.value===!0&&i.value!==null&&i.value.reset()});const{innerPagination:y,computedPagination:S,isServerSide:V,requestServerInteraction:Q,setPagination:D}=ma(n,oe),{computedFilterMethod:O}=da(e,D),{isRowExpanded:h,setExpanded:x,updateExpanded:F}=wa(e,t),E=c(()=>{let a=e.rows;if(V.value===!0||a.length===0)return a;const{sortBy:v,descending:b}=S.value;return e.filter&&(a=O.value(a,e.filter,G.value,oe)),Jt.value!==null&&(a=Zt.value(e.rows===a?a.slice():a,v,b)),a}),z=c(()=>E.value.length),N=c(()=>{let a=E.value;if(V.value===!0)return a;const{rowsPerPage:v}=S.value;return v!==0&&(ye.value===0&&e.rows!==a?a.length>_e.value&&(a=a.slice(0,_e.value)):a=a.slice(ye.value,_e.value)),a}),{hasSelectionMode:K,singleSelection:P,multipleSelection:J,allRowsSelected:ge,someRowsSelected:Xe,rowsSelectedNumber:Oe,isRowSelected:Ve,clearSelection:Yt,updateSelection:be}=_a(e,t,N,f),{colList:Xt,computedCols:G,computedColsMap:Je,computedColspan:Ze}=Ca(e,S,K),{columnToSort:Jt,computedSortMethod:Zt,sort:Fe}=ua(e,S,Xt,D),{firstRowIndex:ye,lastRowIndex:_e,isFirstPage:Be,isLastPage:$e,pagesNumber:he,computedRowsPerPageOptions:el,computedRowsNumber:Se,firstPage:Ee,prevPage:Te,nextPage:Me,lastPage:Qe}=ga(n,y,S,V,D,z),tl=c(()=>N.value.length===0),ll=c(()=>{const a={};return Mt.forEach(v=>{a[v]=e[v]}),a.virtualScrollItemSize===void 0&&(a.virtualScrollItemSize=e.dense===!0?28:48),a});function al(){g.value===!0&&i.value.reset()}function ol(){if(e.grid===!0)return bl();const a=e.hideHeader!==!0?ot:null;if(g.value===!0){const b=l["top-row"],q=l["bottom-row"],k={default:T=>tt(T.item,l.body,T.index)};if(b!==void 0){const T=s("tbody",b({cols:G.value}));k.before=a===null?()=>T:()=>[a()].concat(T)}else a!==null&&(k.before=a);return q!==void 0&&(k.after=()=>s("tbody",q({cols:G.value}))),s(Gl,L(p({ref:i,class:e.tableClass,style:e.tableStyle},ll.value),{items:N.value,type:"__qtable",tableColspan:Ze.value,onVirtualScroll:rl}),k)}const v=[il()];return a!==null&&v.unshift(a()),Dt({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},v)}function nl(a,v){if(i.value!==null){i.value.scrollTo(a,v);return}a=parseInt(a,10);const b=m.value.querySelector(`tbody tr:nth-of-type(${a+1})`);if(b!==null){const q=m.value.querySelector(".q-table__middle.scroll"),{offsetTop:k}=b,T=k<q.scrollTop?"decrease":"increase";q.scrollTop=k,t("virtual-scroll",{index:a,from:0,to:y.value.rowsPerPage-1,direction:T})}}function rl(a){t("virtual-scroll",a)}function et(){return[s(Xl,{class:"q-table__linear-progress",color:e.color,dark:r.value,indeterminate:!0,trackColor:"transparent"})]}function tt(a,v,b){const q=f.value(a),k=Ve(q);if(v!==void 0)return v(lt({key:q,row:a,pageIndex:b,__trClass:k?"selected":""}));const T=l["body-cell"],B=G.value.map(j=>{const qe=l[`body-cell-${j.name}`],Ce=qe!==void 0?qe:T;return Ce!==void 0?Ce(sl({key:q,row:a,pageIndex:b,col:j})):s("td",{class:j.__tdClass(a),style:j.__tdStyle(a)},oe(j,a))});if(K.value===!0){const j=l["body-selection"],qe=j!==void 0?j(ul({key:q,row:a,pageIndex:b})):[s(Ue,{modelValue:k,color:e.color,dark:r.value,dense:e.dense,"onUpdate:modelValue":(Ce,yl)=>{be([q],[a],Ce,yl)}})];B.unshift(s("td",{class:"q-table--col-auto-width"},qe))}const Y={key:q,class:{selected:k}};return e.onRowClick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onClick=j=>{t("RowClick",j,a,b)}),e.onRowDblclick!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onDblclick=j=>{t("RowDblclick",j,a,b)}),e.onRowContextmenu!==void 0&&(Y.class["cursor-pointer"]=!0,Y.onContextmenu=j=>{t("RowContextmenu",j,a,b)}),s("tr",Y,B)}function il(){const a=l.body,v=l["top-row"],b=l["bottom-row"];let q=N.value.map((k,T)=>tt(k,a,T));return v!==void 0&&(q=v({cols:G.value}).concat(q)),b!==void 0&&(q=q.concat(b({cols:G.value}))),s("tbody",q)}function lt(a){return De(a),a.cols=a.cols.map(v=>{const b=p({},v);return ce(b,"value",()=>oe(v,a.row)),b}),a}function sl(a){return De(a),ce(a,"value",()=>oe(a.col,a.row)),a}function ul(a){return De(a),a}function De(a){Object.assign(a,{cols:G.value,colsMap:Je.value,sort:Fe,rowIndex:ye.value+a.pageIndex,color:e.color,dark:r.value,dense:e.dense}),K.value===!0&&ce(a,"selected",()=>Ve(a.key),(v,b)=>{be([a.key],[a.row],v,b)}),ce(a,"expand",()=>h(a.key),v=>{F(a.key,v)})}function oe(a,v){const b=typeof a.field=="function"?a.field(v):v[a.field];return a.format!==void 0?a.format(b,v):b}const ne=c(()=>({pagination:S.value,pagesNumber:he.value,isFirstPage:Be.value,isLastPage:$e.value,firstPage:Ee,prevPage:Te,nextPage:Me,lastPage:Qe,inFullscreen:u.value,toggleFullscreen:d}));function cl(){const a=l.top,v=l["top-left"],b=l["top-right"],q=l["top-selection"],k=K.value===!0&&q!==void 0&&Oe.value>0,T="q-table__top relative-position row items-center";if(a!==void 0)return s("div",{class:T},[a(ne.value)]);let B;if(k===!0?B=q(ne.value).slice():(B=[],v!==void 0?B.push(s("div",{class:"q-table-control"},[v(ne.value)])):e.title&&B.push(s("div",{class:"q-table__control"},[s("div",{class:["q-table__title",e.titleClass]},e.title)]))),b!==void 0&&(B.push(s("div",{class:"q-table__separator col"})),B.push(s("div",{class:"q-table__control"},[b(ne.value)]))),B.length!==0)return s("div",{class:T},B)}const at=c(()=>Xe.value===!0?null:ge.value);function ot(){const a=dl();return e.loading===!0&&l.loading===void 0&&a.push(s("tr",{class:"q-table__progress"},[s("th",{class:"relative-position",colspan:Ze.value},et())])),s("thead",a)}function dl(){const a=l.header,v=l["header-cell"];if(a!==void 0)return a(Le({header:!0})).slice();const b=G.value.map(q=>{const k=l[`header-cell-${q.name}`],T=k!==void 0?k:v,B=Le({col:q});return T!==void 0?T(B):s(zl,{key:q.name,props:B},()=>q.label)});if(P.value===!0&&e.grid!==!0)b.unshift(s("th",{class:"q-table--col-auto-width"}," "));else if(J.value===!0){const q=l["header-selection"],k=q!==void 0?q(Le({})):[s(Ue,{color:e.color,modelValue:at.value,dark:r.value,dense:e.dense,"onUpdate:modelValue":nt})];b.unshift(s("th",{class:"q-table--col-auto-width"},k))}return[s("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},b)]}function Le(a){return Object.assign(a,{cols:G.value,sort:Fe,colsMap:Je.value,color:e.color,dark:r.value,dense:e.dense}),J.value===!0&&ce(a,"selected",()=>at.value,nt),a}function nt(a){Xe.value===!0&&(a=!1),be(N.value.map(f.value),N.value,a)}const we=c(()=>{const a=[e.iconFirstPage||o.iconSet.table.firstPage,e.iconPrevPage||o.iconSet.table.prevPage,e.iconNextPage||o.iconSet.table.nextPage,e.iconLastPage||o.iconSet.table.lastPage];return o.lang.rtl===!0?a.reverse():a});function fl(){if(e.hideBottom===!0)return;if(tl.value===!0){if(e.hideNoData===!0)return;const b=e.loading===!0?e.loadingLabel||o.lang.table.loading:e.filter?e.noResultsLabel||o.lang.table.noResults:e.noDataLabel||o.lang.table.noData,q=l["no-data"],k=q!==void 0?[q({message:b,icon:o.iconSet.table.warning,filter:e.filter})]:[s(ue,{class:"q-table__bottom-nodata-icon",name:o.iconSet.table.warning}),b];return s("div",{class:Re+" q-table__bottom--nodata"},k)}const a=l.bottom;if(a!==void 0)return s("div",{class:Re},[a(ne.value)]);const v=e.hideSelectedBanner!==!0&&K.value===!0&&Oe.value>0?[s("div",{class:"q-table__control"},[s("div",[(e.selectedRowsLabel||o.lang.table.selectedRecords)(Oe.value)])])]:[];if(e.hidePagination!==!0)return s("div",{class:Re+" justify-end"},ml(v));if(v.length>0)return s("div",{class:Re},v)}function vl(a){D({page:1,rowsPerPage:a.value})}function ml(a){let v;const{rowsPerPage:b}=S.value,q=e.paginationLabel||o.lang.table.pagination,k=l.pagination,T=e.rowsPerPageOptions.length>1;if(a.push(s("div",{class:"q-table__separator col"})),T===!0&&a.push(s("div",{class:"q-table__control"},[s("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||o.lang.table.recordsPerPage]),s(Ll,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:b,options:el.value,displayValue:b===0?o.lang.table.allRows:b,dark:r.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":vl})])),k!==void 0)v=k(ne.value);else if(v=[s("span",b!==0?{class:"q-table__bottom-item"}:{},[b?q(ye.value+1,Math.min(_e.value,Se.value),Se.value):q(1,z.value,Se.value)])],b!==0&&he.value>1){const B={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(B.size="sm"),he.value>2&&v.push(s(X,L(p({key:"pgFirst"},B),{icon:we.value[0],disable:Be.value,onClick:Ee}))),v.push(s(X,L(p({key:"pgPrev"},B),{icon:we.value[1],disable:Be.value,onClick:Te})),s(X,L(p({key:"pgNext"},B),{icon:we.value[2],disable:$e.value,onClick:Me}))),he.value>2&&v.push(s(X,L(p({key:"pgLast"},B),{icon:we.value[3],disable:$e.value,onClick:Qe})))}return a.push(s("div",{class:"q-table__control"},v)),a}function gl(){const a=e.gridHeader===!0?[s("table",{class:"q-table"},[ot()])]:e.loading===!0&&l.loading===void 0?et():void 0;return s("div",{class:"q-table__middle"},a)}function bl(){const a=l.item!==void 0?l.item:v=>{const b=v.cols.map(k=>s("div",{class:"q-table__grid-item-row"},[s("div",{class:"q-table__grid-item-title"},[k.label]),s("div",{class:"q-table__grid-item-value"},[k.value])]));if(K.value===!0){const k=l["body-selection"],T=k!==void 0?k(v):[s(Ue,{modelValue:v.selected,color:e.color,dark:r.value,dense:e.dense,"onUpdate:modelValue":(B,Y)=>{be([v.key],[v.row],B,Y)}})];b.unshift(s("div",{class:"q-table__grid-item-row"},T),s(yt,{dark:r.value}))}const q={class:["q-table__grid-item-card"+_.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(q.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(q.onClick=k=>{t("RowClick",k,v.row,v.pageIndex)}),e.onRowDblclick!==void 0&&(q.onDblclick=k=>{t("RowDblclick",k,v.row,v.pageIndex)})),s("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(v.selected===!0?"q-table__grid-item--selected":"")},[s("div",q,b)])};return s("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},N.value.map((v,b)=>a(lt({key:f.value(v),row:v,pageIndex:b}))))}return Object.assign(n.proxy,{requestServerInteraction:Q,setPagination:D,firstPage:Ee,prevPage:Te,nextPage:Me,lastPage:Qe,isRowSelected:Ve,clearSelection:Yt,isRowExpanded:h,setExpanded:x,sort:Fe,resetVirtualScroll:al,scrollTo:nl,getCellValue:oe}),Rl(n.proxy,{filteredSortedRows:()=>E.value,computedRows:()=>N.value,computedRowsNumber:()=>Se.value}),()=>{const a=[cl()],v={ref:m,class:C.value};return e.grid===!0?a.push(gl()):Object.assign(v,{class:[v.class,e.cardClass],style:e.cardStyle}),a.push(ol(),fl()),e.loading===!0&&l.loading!==void 0&&a.push(l.loading()),s("div",v,a)}}});const ka=async({floor_id:e})=>{await Ie.delete(`/rooms/floor/delete/${e}`)},xa=()=>{const e=je(),l=n=>{const o=e.getQueryData(U.FLOORS);!o||e.setQueryData(U.FLOORS,()=>o.filter(r=>r.id!==n.floor_id))},t=n=>{const o=e.getQueryData(U.ROOMS);!o||e.setQueryData(U.ROOMS,()=>o.filter(r=>r.room_floor_id!==n.floor_id))};return Ne(ka,{onSuccess:(n,o)=>{l(o),t(o)}})},Pa=async({floor_id:e,name:l})=>{const{data:t}=await Ie.put(`/rooms/floor/update/${e}`,{name:l});return t},Ra=()=>{const e=je(),l=n=>{const o=e.getQueryData(U.FLOORS);!o||e.setQueryData(U.FLOORS,()=>o.map(r=>r.id!==n.id?r:p({},n)))},t=n=>{const o=e.getQueryData(U.ROOMS);!o||e.setQueryData(U.ROOMS,()=>o.map(r=>r.room_floor_id!==n.id?r:{room_floor_id:n.id,room_floor_name:n.name,list_rooms:r.list_rooms}))};return Ne(Pa,{onSuccess:n=>{l(n),t(n)}})};function Oa(e){return Ol()?(Vl(e),!0):!1}const me=typeof window!="undefined",Va=e=>typeof e=="string",Ke=()=>{};function We(e){var l;const t=R(e);return(l=t==null?void 0:t.$el)!=null?l:t}const It=me?window:void 0;me&&window.document;me&&window.navigator;me&&window.location;function zt(...e){let l,t,n,o;if(Va(e[0])?([t,n,o]=e,l=It):[l,t,n,o]=e,!l)return Ke;let r=Ke;const u=H(()=>R(l),f=>{r(),!!f&&(f.addEventListener(t,n,o),r=()=>{f.removeEventListener(t,n,o),r=Ke})},{immediate:!0,flush:"post"}),d=()=>{u(),r()};return Oa(d),d}function Fa(e,l,t={}){const{window:n=It,ignore:o}=t;if(!n)return;const r=A(!0),d=[zt(n,"click",m=>{const i=We(e),g=m.composedPath();!i||i===m.target||g.includes(i)||!r.value||o&&o.length>0&&o.some(_=>{const w=We(_);return w&&(m.target===w||g.includes(w))})||l(m)},{passive:!0,capture:!0}),zt(n,"pointerdown",m=>{const i=We(e);r.value=!!i&&!m.composedPath().includes(i)},{passive:!0})];return()=>d.forEach(m=>m())}const Ge=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Ye="__vueuse_ssr_handlers__";Ge[Ye]=Ge[Ye]||{};Ge[Ye];var Ht,Ut;me&&(window==null?void 0:window.navigator)&&((Ht=window==null?void 0:window.navigator)==null?void 0:Ht.platform)&&/iP(ad|hone|od)/.test((Ut=window==null?void 0:window.navigator)==null?void 0:Ut.platform);var Ba=Object.defineProperty,Kt=Object.getOwnPropertySymbols,$a=Object.prototype.hasOwnProperty,Ea=Object.prototype.propertyIsEnumerable,Wt=(e,l,t)=>l in e?Ba(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,Ta=(e,l)=>{for(var t in l||(l={}))$a.call(l,t)&&Wt(e,t,l[t]);if(Kt)for(var t of Kt(l))Ea.call(l,t)&&Wt(e,t,l[t]);return e};const Ma={top:0,left:0,bottom:0,right:0,height:0,width:0};Ta({text:""},Ma);const Gt=e=>{const l=A(!1),t=A(null),n=async()=>{var r;l.value=!0,await pe(),(r=t.value)==null||r.focus()},o=()=>{l.value=!1,e==null||e.onFinishEdit()};return Fa(t,()=>o()),{inputElementRef:t,isEditMode:l,startEdit:n,finishEdit:o}},Qa=_t({props:{floorName:{type:String,required:!0},floorId:{type:Number,required:!0},rooms:{type:Array,required:!0}},setup(e){const l=e,{data:t}=$t(),{notifySaveSuccess:n,notifySaveFailed:o,notifyWarning:r}=Et(),u=ht(),{t:d}=Bt(),f=c(()=>{const{code:x}=u.query;return!x||Array.isArray(x)?l.rooms:l.rooms.filter(({room_type_code:F})=>F===x.replaceAll("_"," "))}),{inputElementRef:m,isEditMode:i,startEdit:g,finishEdit:_}=Gt({onFinishEdit:()=>V({value:l.floorName})}),w=Ra(),C=xa(),{value:y,errorMessage:S,resetField:V,validate:Q}=Rt("name",Ot(Vt.string().nonempty().max(10).refine(x=>t.value?!t.value.some(({id:F,name:E})=>F!==l.floorId&&E===x):!1)),{initialValue:l.floorName,validateOnValueUpdate:!1}),D=async x=>{const{valid:F}=await Q();if(!F)return;const{value:E}=x.currentTarget;w.mutate({floor_id:l.floorId,name:E},{onSuccess:()=>{n(),_()},onError:()=>{o()}})},O=()=>{if(l.rooms.length!==0){r(d("please_remove_all_rooms_of_this_floor"));return}C.mutate({floor_id:l.floorId},{onSuccess:()=>{n()},onError:()=>{o()}})},h=()=>{ze.replace({path:"/settings/room-settings/rooms/new",state:{roomName:null,floorId:l.floorId},query:u.query})};return(x,F)=>(I(),W(pa,{grid:"",title:l.floorName,rows:R(f),columns:[{name:"room_type_code",label:"Room Type Code",field:E=>E.room_type_code},{name:"name",label:"Room Name",field:E=>E.name}],"hide-pagination":""},{"top-left":M(()=>[R(i)?(I(),W(Ft,{key:0,ref_key:"inputElementRef",ref:m,modelValue:R(y),"onUpdate:modelValue":F[0]||(F[0]=E=>St(y)?y.value=E:null),class:"text-h5","error-message":R(S),error:!!R(S),placeholder:R(d)("input_floor_name"),filled:"",dense:"",onKeydown:[re(ae(D,["prevent"]),["enter"]),re(ae(R(_),["prevent"]),["esc"]),re(ae(R(_),["prevent"]),["tab"])]},null,8,["modelValue","error-message","error","placeholder","onKeydown"])):(I(),W(X,{key:1,label:l.floorName,class:"text-h5",padding:"xs 12px","no-caps":"",dense:"",flat:"",onClick:R(g)},null,8,["label","onClick"]))]),"top-right":M(()=>[$(X,{flat:"",round:"",icon:"more_vert"},{default:M(()=>[$(Fl,{anchor:"bottom right",self:"top right"},{default:M(()=>[xe((I(),W(Pe,{clickable:"",onClick:h},{default:M(()=>[$(te,{side:""},{default:M(()=>[$(ue,{name:"add"})]),_:1}),$(te,null,{default:M(()=>[de(fe(R(d)("add_new_room")),1)]),_:1})]),_:1})),[[wt]]),$(yt),xe((I(),W(Pe,{clickable:"",onClick:O},{default:M(()=>[$(te,{side:""},{default:M(()=>[$(ue,{name:"delete"})]),_:1}),$(te,null,{default:M(()=>[de(fe(R(d)("delete_floor")),1)]),_:1})]),_:1})),[[wt]])]),_:1})]),_:1})]),_:1},8,["title","rows","columns"]))}}),Da={class:"row"},La={class:"q-my-xl row justify-center"},Wa=_t({setup(e){const{data:l}=Ml(),{data:t}=$t(),{data:n}=Tl(),o=Il(),r=ht(),{t:u}=Bt(),{notifySaveSuccess:d,notifySaveFailed:f}=Et(),{value:m,errorMessage:i,validate:g,resetField:_}=Rt("name",Ot(Vt.string().nonempty().max(10).refine(h=>t.value?!t.value.some(({name:x})=>x===h):!1)),{validateOnValueUpdate:!1,initialValue:""}),{inputElementRef:w,isEditMode:C,finishEdit:y,startEdit:S}=Gt({onFinishEdit:()=>_({value:""})}),V=c(()=>{var x;let h=0;return(x=l.value)==null||x.forEach(({num_of_room:F})=>h+=F),h}),Q=async()=>{!(await g()).valid||o.mutate({name:m.value},{onSuccess:()=>{d(),y()},onError:()=>{f()}})},D=()=>{console.log("Create new room type"),ze.replace({path:"/settings/room-settings/room-types/new",query:r.query,state:{code:null}})},O=(h,x)=>{console.log("Edit room type",h),ze.replace({path:`/settings/room-settings/room-types/${h}`,query:r.query,state:{code:x}})};return(h,x)=>{const F=Bl("router-view");return I(),Ae("div",null,[$(jl,{"model-value":15,"before-class":"q-px-sm","separator-style":"background-color: transparent;"},{before:M(()=>[$(ft,{separator:"",bordered:""},{default:M(()=>[xe((I(),W(Pe,{to:"/settings/room-settings",replace:""},{default:M(()=>[$(te,{class:qt([R(r).query.code?"text-black":"text-primary"])},{default:M(()=>[de(fe(R(u)("all")),1)]),_:1},8,["class"]),$(te,{side:""},{default:M(()=>[$(Qt,{label:R(V),rounded:""},null,8,["label"])]),_:1})]),_:1})),[[xt]]),(I(!0),Ae(Ct,null,pt(R(l),({num_of_room:E,code:z,name:N,id:K})=>xe((I(),W(Pe,{key:K,to:`/settings/room-settings?code=${z.replaceAll(" ","_")}`,replace:""},{default:M(()=>[$(te,null,{default:M(()=>[$(Pt,{class:qt([R(r).query.code===z.replaceAll(" ","_")?"text-primary":"text-black"])},{default:M(()=>[de(fe(z)+" ",1),$(Qt,{label:E,rounded:""},null,8,["label"])]),_:2},1032,["class"]),$(Pt,{caption:""},{default:M(()=>[de(fe(N),1)]),_:2},1024)]),_:2},1024),$(te,{side:""},{default:M(()=>[$(X,{icon:"edit",flat:"",round:"",onClick:ae(P=>O(K,z),["prevent"])},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["to"])),[[xt]])),128))]),_:1}),kt("div",Da,[$(X,{label:R(u)("new_room_type"),class:"col q-my-md",icon:"add_circle",stretch:"",onClick:D},null,8,["label"])])]),after:M(()=>[(I(!0),Ae(Ct,null,pt(R(n),({room_floor_name:E,room_floor_id:z,list_rooms:N})=>(I(),W(Qa,{key:z,"floor-name":E,"floor-id":z,rooms:N},null,8,["floor-name","floor-id","rooms"]))),128)),kt("div",La,[R(C)?(I(),W(Ft,{key:0,ref_key:"inputElementRef",ref:w,modelValue:R(m),"onUpdate:modelValue":x[0]||(x[0]=E=>St(m)?m.value=E:null),"error-message":R(i),error:!!R(i),class:"h-sm",placeholder:R(u)("input_floor_name"),filled:"",onKeydown:[re(ae(Q,["prevent"]),["enter"]),re(ae(R(y),["prevent"]),["esc"]),re(ae(R(y),["prevent"]),["tab"])]},null,8,["modelValue","error-message","error","placeholder","onKeydown"])):(I(),W(X,{key:1,label:R(u)("new_floor"),icon:"add_circle",onClick:R(S)},null,8,["label","onClick"]))])]),_:1}),$(F)])}}});export{Wa as default};
